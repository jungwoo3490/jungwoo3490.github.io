<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[JUNGWOO DEV LOUNGE's RSS Feed]]></title><description><![CDATA[JUNGWOO DEV LOUNGE]]></description><link>https://jungwoo3490.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 04 Apr 2025 15:33:39 GMT</lastBuildDate><item><title><![CDATA[Node 버전을 올리기만 했는데 require(esm) 에러가 발생했다구요?]]></title><description><![CDATA[회사에 신규 팀원이 합류해서 프로젝트를 clone하고 의존성을 설치하고 개발서버를 열려고 스크립트를 실행했는데, 오류가 발생했다는 제보를 받았어요. 오류 메시지는 다음과 같았어요.  어라 난 require…]]></description><link>https://jungwoo3490.github.io/blog/require-esm/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/require-esm/</guid><pubDate>Tue, 01 Apr 2025 21:01:00 GMT</pubDate><content:encoded>&lt;p&gt;회사에 신규 팀원이 합류해서 프로젝트를 clone하고 의존성을 설치하고 개발서버를 열려고 스크립트를 실행했는데, 오류가 발생했다는 제보를 받았어요.&lt;/p&gt;
&lt;p&gt;오류 메시지는 다음과 같았어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.12883435582822%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABIUlEQVR42jWRWXqDMAyEuUUwEBZjMC2lDyWUJWlI0/ufSZ1RzMP/SdbmkR19WSuX2sp3XcscGMpS+qKQEbkRuU+c34scFNKXhXyADuc3nJvzWVJjlARE97aV3XtZnZOtaQJOJgy+IffwrdzVerVX5G9gQT1ZUUtBRzyaEdzRtKN4cw2UWnmimUWjrbWJxRzI+F/n5YHaH6XRHLeioDCw1nUnDKA/YQgtBzG+gC2oGbAqsVkqp/gkcRwrBiTm5UcLmnVtwBvmsAZ9qjjU7MHykj68ncsALN+2SnkJBrKIa7CBsn+x1hUDn2FFKjxifNs8SVUJP8AQVfjyg0Knv8kGNl/gb61HMxT5Tllx7stKhgq/X+X4YarLpIU6KvUgS4wq/Aeqj8vUWrc+ZQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/b416d29b86f8bf1cf9e108423f362e07/a6d36/image-37.png&quot;
        srcset=&quot;/static/b416d29b86f8bf1cf9e108423f362e07/222b7/image-37.png 163w,
/static/b416d29b86f8bf1cf9e108423f362e07/ff46a/image-37.png 325w,
/static/b416d29b86f8bf1cf9e108423f362e07/a6d36/image-37.png 650w,
/static/b416d29b86f8bf1cf9e108423f362e07/e548f/image-37.png 975w,
/static/b416d29b86f8bf1cf9e108423f362e07/3c492/image-37.png 1300w,
/static/b416d29b86f8bf1cf9e108423f362e07/ccf0c/image-37.png 1428w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;어라 난 require를 쓴 적이 없는데...???&lt;br/&gt;
원인 파악을 위해 제 로컬에서 돌려봤어요. 문제없이 로컬서버가 잘 돌아갔죠. (물론 경고는 떴지만요...!)&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.950920245398773%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVR42k2L6w6CMBSDeYr1jMVN0CgJEgP/CJdw04T3f6DKIFN/NG1PvxM5J1wW8P0C1xUcR7BtwXkGuw7bpvbbMIBNA/Y9dn6afpyXz3UNRrEWPgrN4imsSjDLhMYI4/iQMfqb9caKHB66Z0P3WyQKxD0lihvV9Ux1cbQnyyRJaa1jWVbM83x7MASwPwGHQv73D4xuVJwb0wfsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/5dedd2878c15b4818005eeffe55473ae/a6d36/image-41.png&quot;
        srcset=&quot;/static/5dedd2878c15b4818005eeffe55473ae/222b7/image-41.png 163w,
/static/5dedd2878c15b4818005eeffe55473ae/ff46a/image-41.png 325w,
/static/5dedd2878c15b4818005eeffe55473ae/a6d36/image-41.png 650w,
/static/5dedd2878c15b4818005eeffe55473ae/906b5/image-41.png 950w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;require는 어디서 튀어나온 녀석일까...?&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;.js&lt;/code&gt; 파일이 어떤 모듈 시스템을 사용할지는 &lt;code&gt;package.json&lt;/code&gt;의 &lt;code&gt;type&lt;/code&gt; field에 따라 결정돼요.&lt;br/&gt;
&lt;code&gt;type&lt;/code&gt; field를 별도로 지정하지 않으면 default 값은 &lt;code&gt;&quot;commonjs&quot;&lt;/code&gt;이고, CJS 형식으로 해석되어요.&lt;br/&gt;
다른 하나의 옵션은 &lt;code&gt;&quot;module&quot;&lt;/code&gt;이에요. 이럴 경우 ESM 형식으로 해석되어요.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.ts&lt;/code&gt; 파일은 TypeScript 4.7 버전부터 &lt;code&gt;tsconfig.json&lt;/code&gt;의 &lt;code&gt;moduleResolution&lt;/code&gt; 필드가 &lt;code&gt;nodenext&lt;/code&gt; 또는 &lt;code&gt;node16&lt;/code&gt; 으로 설정된 경우 위에 서술한 규칙이 똑같이 적용되게 돼요.&lt;/p&gt;
&lt;p&gt;당시 Vite config 파일의 확장자가 &lt;code&gt;.ts&lt;/code&gt;였는데, 이것저것 마이그레이션하는 과정에서 type field 지정을 빼먹게 되어서 .ts 파일이 CJS 형식으로 해석되어서 require(&quot;vite&quot;)와 같은 형태가 되게 돼요.&lt;/p&gt;
&lt;p&gt;Vite 공식문서를 보면 다음과 같이 Vite는 6버전부터 모든 모듈을 ESM으로 지원한다고 서술되어 있어요.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 90.79754601226993%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcElEQVR42q1U266bQAzk/z+wD0c6SbgvLOwlQAgBMvWY5By1D5VaFcla1hjv2DPe5Hq9Ik0zPJ9P/I8neTweGMcJ9/uCeZ7F7rouyyK+O/idDw98H/p+/9004TRNMMagaVoURYm6rlFVRoxrBef83yGcBVnvIvrey89BEzjnZN+j63pY26FtW1mtrPbLx33XdWrcs3VEmYQ448dHg49Pi49Th7y0MPWBOISggd4fB/Fn773uQ4jq63uHGK+6slUJe8UfGRRjlASDBg/D8E9EJeu6KoqrJOBJTMpkTDpNt39hedVEXkq3bkJjR3kftbQgxsNYKvvKlaWxKj67VPC2XxDW0rM8L2Aai1Pm8Jk6XAqHsmqFiB7n3COrvPS4h7FsS5QKhLwwonME8F1Jwj4Nw6i9o4TiMGmAj5P8cBPfjHi9qa/3E6bb8ueS36QoMVIWT4+vfYxB5cPyWTJR7fv+Evdb4HiR9xL2tm1acpYVOF8KXNISeVGjLMWqRuVDked5LjG56q8yHmX9MhPE13/rkFkp3Eb6x48Mbm1QATet14RM4nyUfa/Jj3geZnSyGEtQ4zh+IyQiBpVlJeQ06qNxHI8xNOhkmo6EB8qs6FA3Tg+gb1keByk1SyoMzlmPU2qEzVrm26IoW6RZJbdRqipoBS0RWY5bF6QSL6vXZG3bYV03JPu+adOpsbYLuhpTv0gIX9qjCtb1obfPtu2g3LgnqTS+KylkrSgqXC4XnM65zLSQk9aKjrfNu2QiJClsCd/p4z1KU1ILKVmGREnhkBO2tU4b3zS8RbwgPXpKhCSHzSdi9vq4fVq1We7N5bGLpJ74CYJRYfA2u4LwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/429a89ee65292fe815e4bbd431058354/a6d36/image-40.png&quot;
        srcset=&quot;/static/429a89ee65292fe815e4bbd431058354/222b7/image-40.png 163w,
/static/429a89ee65292fe815e4bbd431058354/ff46a/image-40.png 325w,
/static/429a89ee65292fe815e4bbd431058354/a6d36/image-40.png 650w,
/static/429a89ee65292fe815e4bbd431058354/dc333/image-40.png 938w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;사용하는 Vite 버전은 6버전이었고, 그럼 Vite는 ESM으로 export되는데 이걸 require로 가져오려 해서 오류가 발생했구나!! 라고 생각했어요. (어찌보면 일부는 맞고 일부는 틀린 생각이었어요)&lt;/p&gt;
&lt;p&gt;그래서 &lt;code&gt;package.json&lt;/code&gt;의 &lt;code&gt;type&lt;/code&gt; 필드에 &lt;code&gt;&quot;module&quot;&lt;/code&gt;을 적용해주었어요. 그러면 ESM으로 내보낸 모듈을 import로 가져오니까 문제될게 없겠죠?? 실제로 문제가 말끔히 해결됐어요.&lt;br/&gt;
아니면 명시적으로 Vite config 파일의 확장자를 &lt;code&gt;.mts&lt;/code&gt;로 지정해주어도 해결이 됩니다.&lt;/p&gt;
&lt;h2&gt;왜 Node 버전을 올렸는데 에러가 생긴 걸까...?&lt;/h2&gt;
&lt;p&gt;하지만 여기서 의문이 생깁니다.&lt;/p&gt;
&lt;p&gt;저는 Node 22.10.0 버전을 사용하고 있었고, 프로젝트 환경은 Vite 6 + Yarn PnP 4.5.3 버전을 사용하고 있었어요.&lt;br/&gt;
신규 팀원분도 모든 버전 세팅이 동일했어요. Node 버전을 제외하고요.&lt;/p&gt;
&lt;p&gt;신규 팀원분이 오셨을 때 Node LTS 버전이 22.14.0 버전이었고, 팀원분은 LTS 버전을 설치해서 22.14.0 버전을 사용하고 있었어요.&lt;/p&gt;
&lt;p&gt;그럼 22.10.0에서도 오류가 발생해야 하는거 아니야...?&lt;/p&gt;
&lt;p&gt;마이너 버전을 하나씩 올려가며 어느 기점부터 에러가 발생하기 시작하는지 살펴본 결과, 22.11.0 -&gt; 22.12.0 기점부터 에러가 발생하기 시작했어요.&lt;/p&gt;
&lt;p&gt;22.12.0 패치노트를 살펴봤을 때, 이런 내용을 발견하게 되었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 99.38650306748465%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC20lEQVR42nWUbZeaQAyF+f//rt3uKqIgDKCAyou666Jumic4bnt6+iEnQ2Ymc29uSBAna/n561Uyl0u0jCVZp/I2C2URrSRaxbJYruRtvjCLVom8hZGE0VJm+v06m8uL3o2TVC6XT7nd7hLUzc6Sbatays3W7HBoZRiOcjye5Hg6S6/rtuv1+yyDxrp+kEPb6blOum6w2Dhe5Xq9SVBVjSwVicsLs/kikvP7h8iX6Is3O4T/Xt/lfv/6y4ixZwlBmKSZrNXyopSqbnTtDPVc6a3ixMoQ6kObbfVM8D8LoFeUGyExyaCOx+paY8qg2U17jZ7Z7w9mnZag1the71OCVktAaQJqlma5IcJA4xGCOs2cxSbLJFEBplj2jCMmTKhl0DR7KYqN4EHB66Dy9L1Ngm2Mjd+HFQip3TiOVucA6M1ubxvAJuFOjRh7rH3cP4jClGOnZ9jjHLH3j8skCnAxqMTQUKor7U/oZKo89OkAL5yVJ8+NttM1vQoAejHYP0TZVpV5lEQYEkDT5eWzR30ZOMe3F5AHYGIqsxkbmszMC4NfKmr6kjO5PgAD1l5ALxxigO7yOaJyZZdC/dVQcFLdTeacISUJ35TFPRLTCVYiBUNiPGwDoE4UKtugdiDLXCExDc9lkmk8LzYPhIWVpu97tcFEgfrp/K6N3bamENk5hPlGZ+09F9qus1r5+tHQ0P24XOTLflWtIQeTNJXchKml0F7Ly9KS+np5kdjD08j8ls5NHdANg9w143i9SuBUuR8vrzaeoEILMI7CxfLZIqawJnfFNEDwID+dz4qynyaTTiUbDoUeZr4hDD04CxfPb0QxhTUxAlgvZtlzDTPu2BDRGj8au7FNfwm11o/2gLpTWz9Ud/kkmlc1VQ9yAMDCKDNJMtso9XBqU5muRwioGW1NlOuaenOZpJRlGdMqU5cwgKnj80/55OfWWXdlWD5m2/V2+5519z/8/d8zeOw32eXSjL5rU1wAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/e23e2af9f3b5108914129f6cbdfc2204/a6d36/image-42.png&quot;
        srcset=&quot;/static/e23e2af9f3b5108914129f6cbdfc2204/222b7/image-42.png 163w,
/static/e23e2af9f3b5108914129f6cbdfc2204/ff46a/image-42.png 325w,
/static/e23e2af9f3b5108914129f6cbdfc2204/a6d36/image-42.png 650w,
/static/e23e2af9f3b5108914129f6cbdfc2204/b4098/image-42.png 816w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;require(esm)&lt;/code&gt;을 default로 지원하게 되었다는데, 기존엔 지원되지 않았던 걸까요?? 왜 &lt;code&gt;require(esm)&lt;/code&gt;은 실험적인 기능이었을까요??&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;이를 이해하려면 CJS와 ESM 모듈을 Node.js가 어떻게 로드하는지에 대한 이해가 필요해요.&lt;/p&gt;
&lt;h2&gt;CJS vs ESM&lt;/h2&gt;
&lt;p&gt;ESM이 등장하기 전 Node 진영에서는 CJS라는 모듈 시스템을 사용하고 있었어요.&lt;/p&gt;
&lt;p&gt;CJS는 &lt;code&gt;require&lt;/code&gt;/&lt;code&gt;module.exports&lt;/code&gt;로 모듈을 내보내고 불러와요.&lt;/p&gt;
&lt;p&gt;Node는 CJS 모듈을 로드하기 위해 CJS 모듈 로더를 사용하는데, CJS 모듈 로더는 런타임에 require문을 만나면 그제서야 이 모듈을 동적으로 로드하고 실행해요.&lt;/p&gt;
&lt;p&gt;이런 동적 모듈 로딩 방식에는 한계점이 있었어요.&lt;br/&gt;
먼저 성능 문제였어요. 서버사이드에서는 모든 파일이 로컬에 있어서 로드하는 데 성능 이슈가 크게 문제되지 않았지만, 브라우저에서는 필요한 모듈을 모듈이 위치한 곳에서 모두 내려받을 때까지 아무것도 할 수 없었어요.&lt;br/&gt;
또 tree-shaking을 할 수 없었어요. 미리 모듈 사이의 연관관계를 분석해야 사용되지 않는 모듈을 파악하고 tree-shaking이 가능한데, 런타임에 require문을 만났을 때 동기적으로 모듈을 로드하기 때문에 이런 연관관계를 런타임 전에 미리 분석할 수가 없었기 때문이에요.&lt;/p&gt;
&lt;p&gt;하지만 ESM은 빌드 타임에 정적으로 모듈을 분석해서 의존성 트리를 만들어요. 즉, 런타임 이전에 모듈간의 의존성을 미리 파악할 수 있게 되고, 이로 인해 tree-shaking도 가능해지죠.&lt;/p&gt;
&lt;p&gt;더 깊게 알아볼까요?? ESM이 브라우저에서 동작하기 위해서는 모듈 레코드라는 자료구조로 변경이 되어야 하는데, 이런 모듈화 과정은 구성(construction), 인스턴스화(instantiation), 평가(Evaluation)의 3단계로 이루어져요.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;구성(construction) 단계는 ESM loader가 entry point부터 시작하여 모든 모듈 파일을 로드, 파싱하여 모듈 레코드로 변환하고, 모듈 맵에 추가해요.&lt;/p&gt;
&lt;p&gt;인스턴스화(instantiation) 단계는 모듈 인스턴스들을 메모리에 연결하는 단계에요. JS 엔진이 모듈 레코드의 변수를 관리하는 모듈 환경 레코드를 생성하고, 모든 export된 값을 배치하기 위한 메모리 공간을 찾아요. 모든 export 연결을 마무리하면 해당 모듈에서 import 한 항목들을 export들과 연결해요. 이 과정을 통해 동일 모듈에 대한 export와 import는 같은 메모리의 주소를 가리키게 돼요.&lt;/p&gt;
&lt;p&gt;평가(Evaluation) 단계에서는 코드를 실행하여 메모리를 변수의 실제 값으로 채우는 단계예요.&lt;/p&gt;
&lt;p&gt;이렇게 CJS와 ESM이 모듈을 로드하는 메커니즘이 완전 다르기도 하고, &lt;code&gt;require(esm)&lt;/code&gt;을 하지 못하는 가장 큰 이유는 ESM에서 지원하는 top-level await이라는 기능 때문이에요.&lt;/p&gt;
&lt;p&gt;기존에 await를 사용하려면 async 함수 내부에 가둬서 사용을 해야 했는데, ESM에서는 top level에서 async 없이 await을 호출할 수 있어요. 하지만 이 기능을 CJS에서는 지원하지 않았기 때문에 &lt;code&gt;require(esm)&lt;/code&gt;은 이론상 불가능하게 됐어요.&lt;/p&gt;
&lt;p&gt;Node 22.12.0 이전 버전까지는 &lt;code&gt;require(esm)&lt;/code&gt;은 실험적 기능이었고, 특정 플래그를 통해서만 사용할 수 있었어요. 하지만 22.12.0부터 &lt;code&gt;require(esm)&lt;/code&gt; 기능이 default로 동작하게 되었어요.&lt;/p&gt;
&lt;h2&gt;끝없는 의문&lt;/h2&gt;
&lt;p&gt;22.12.0부터 &lt;code&gt;require(esm)&lt;/code&gt;을 지원했구나!!! 여기까지는 이해했어요.&lt;/p&gt;
&lt;p&gt;그런데 까면 깔수록 더욱 이상해집니다. 그럼 22.12.0 이하 버전에서는 에러가 나야 하고, 22.12.0부터 되어야 하는 거 아닌가...?&lt;/p&gt;
&lt;p&gt;지금은 이와 완전 반대인 상황이에요. 대체 왜 이런 상황이 발생한 걸까요??&lt;/p&gt;
&lt;h2&gt;Vite의 Dual package export 방식&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;package.json&lt;/code&gt;의 &lt;code&gt;exports&lt;/code&gt; field를 활용하면 동일한 import path에 대해 특정 조건에 따라 다른 모듈을 제공할 수 있어요. 이를 Dual Package라고 칭해요.&lt;/p&gt;
&lt;p&gt;Vite의 &lt;code&gt;exports&lt;/code&gt; 필드를 확인해보았는데, 정확히 Dual Package 방식으로 동작하고 있었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.74233128834356%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42n2R6U7DMBCE8xqQ+Mjh1K6TOEeTtKQtLVQCwfs/z7C2ggpC4sdoNor383g3ml7esb99oluupGdsjYUtLLgQEEKSRJBc/b/aKyoJUPcT1EYjyTV4/AjOGJLVBRdgnCNhd8UJ+/HNwJgIzulcJKWA0gY9JaznE6p+hO1GNNMC3XTIsgy6yDFUBo3ZBE2NhSPvrMbsLExZoLcGKs8RpVKiKDeYbx+Yrm8EvsBNTxj2C1xTU5MJjce+xnlwAXCbOxzaClNtcd45VLokKaiiIGAqkVExEszP0s1HbBsHlQp0pgyQpasD6DK2lG6LPcF8Yg+xBBMyvT85TTMCKgItGE6vwZvxgLJUMKpAS+kuuzak9PJPfYgTxCvAz/fXUlJdo9AWLInpJhkOcZbQlnnYoN/2d5Oft/8v11qIv/oC0QbMvjPfnjsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/aed834cb54508ecbfeb7462601a2548a/a6d36/image-43.png&quot;
        srcset=&quot;/static/aed834cb54508ecbfeb7462601a2548a/222b7/image-43.png 163w,
/static/aed834cb54508ecbfeb7462601a2548a/ff46a/image-43.png 325w,
/static/aed834cb54508ecbfeb7462601a2548a/a6d36/image-43.png 650w,
/static/aed834cb54508ecbfeb7462601a2548a/e548f/image-43.png 975w,
/static/aed834cb54508ecbfeb7462601a2548a/3c492/image-43.png 1300w,
/static/aed834cb54508ecbfeb7462601a2548a/c1bea/image-43.png 1388w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;require로 Vite를 가져오면 &lt;code&gt;index.cjs&lt;/code&gt;, 즉 CJS 모듈을 내보내고, import로 가져오면 esm 모듈을 내보내요.&lt;br/&gt;
즉, Vite는 무조건 ESM만 제공하는게 아니라, CJS, ESM 두 방식에 대해 모두 대응을 하고 있었어요. 6버전이 됐음에도 불구하구요.&lt;/p&gt;
&lt;p&gt;실제로 코어 함수들은 모두 &lt;code&gt;node/index.js&lt;/code&gt;에 ESM으로 작성되어 있어요. 그러면 &lt;code&gt;index.cjs&lt;/code&gt; 내부는 어떻게 구성되어 있을까요??&lt;/p&gt;
&lt;p&gt;먼저 &lt;code&gt;warnCJSUsage()&lt;/code&gt; 를 호출해요. 처음에 22.11.0에서 뜬 warning 문구가 이 함수 호출로 인해서 뜨게 된 것이었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVR42nVTCZLbOAz0P2LxAMCbFC1KPmR74jly1u7+/zsLepOanWTC6qIISSAaQGMDxts0xbHO87jsd4dT9QEEkEIjyUq0UmhQWgyDlEK+XRtAU9tlevg8P32fHr/V29d8vE4v/9Tnv6aXv4/Pnx9Ox+P+alJVGn/x30ilDJEDbZEKdURLZUyxzmQI5BZRKa01kJTq18ioIdhEdU/jYtrqyhhcgE6bNJJU0KF51xxGCCHFa/CNUtLHatrFri/+8sWfX0ptu7Zvy6EuR3e4Wcbp2c9rytkRIpl+0U9nhUAlzy5NgpyygTmiklbzL6KbHR6IUGtHAJ3OqzMXNXrjM0Ik9FqnaGPmVEaXio8FQoZQKDdjneAU3tJWTKWGmq03nKvW1pB1hpzv6GFjj2wj0mvMH87MDtAxVb6FbS4sk+WTVh38knfQEt5UWv1X+Q272rKkscxzcS44XxSYGG3bhSnGEGqKYd4F7gH/PTDnYRDDliHFwLT1cj6vD5fzoY3eZkvJYiSIBkuwU/LRmuxtDY4RDGLIWBqWWbu4AcV1sp5j+dD3VEzIpkwuFMustGLCoBSBZgAnB8jK7QDknLnPu7hcYzuyTpQvmhGLdonI6rtUGOLHkr3aYrjvYsOqMXVyy5pOj+n8ND58ivOaOdOp+FLTrsXaId9bG64o5GBq3B/m0/lwuV0Pp31qM/rYG6PhXqPtH5yF8K3tbs/r49PuuKZpz+OJPuA4U8eijfttFv8nElZcno880Aic0odh2zshtnzo4EkWf3JmeXDHY/K3j8t+9tbZPoGIfCNxY/jA1k8JvePMH0Jw10tbDyXXBmBdGtM4ThNrJ2VnueE8Fr/H51axDnsEY4CQJXnvyMA1Yvr8GO7W+8T/BeIcsMt2oiSQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/64d5d7894a3215d933bc38eded3f0e18/a6d36/image-44.png&quot;
        srcset=&quot;/static/64d5d7894a3215d933bc38eded3f0e18/222b7/image-44.png 163w,
/static/64d5d7894a3215d933bc38eded3f0e18/ff46a/image-44.png 325w,
/static/64d5d7894a3215d933bc38eded3f0e18/a6d36/image-44.png 650w,
/static/64d5d7894a3215d933bc38eded3f0e18/b97f6/image-44.png 958w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;핵심 로직은 이 부분이에요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 14.723926380368097%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVR42h2ObW7DIBBEfY8AZgHjr9oRNqVunFSNcv8zvZL+eNLsaGY1TVg2hseLeNwrD+LXje+fk/N5J+071+OXac0MU8K0glIaow3GaNRF1VtVbdDqUn1NY1tNlxLj++G2saSFLWeO4yR9TOzLTPnMzCmzlcx6HenHSOgHUimkvBKjZ82FYZ5ophhwIljX0dYFXixB2n86LxWHsy1iq995QnCIq3lxhBjpal/enb7Hec8fblpYdr9RfY4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/53f2a496a04fb91e2a77e4155dbb9d33/a6d36/image-45.png&quot;
        srcset=&quot;/static/53f2a496a04fb91e2a77e4155dbb9d33/222b7/image-45.png 163w,
/static/53f2a496a04fb91e2a77e4155dbb9d33/ff46a/image-45.png 325w,
/static/53f2a496a04fb91e2a77e4155dbb9d33/a6d36/image-45.png 650w,
/static/53f2a496a04fb91e2a77e4155dbb9d33/e548f/image-45.png 975w,
/static/53f2a496a04fb91e2a77e4155dbb9d33/3c492/image-45.png 1300w,
/static/53f2a496a04fb91e2a77e4155dbb9d33/f793b/image-45.png 1404w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;index.cjs&lt;/code&gt;에서 먼저 ESM에서 제공하는 함수들을 미리 정의만 해둔 뒤, ESM Vite 모듈을 dynamic import로 가져온 뒤 가져온 모듈에서 미리 정의해둔 함수들에 실제로 매핑하게 돼요. &lt;br/&gt;결국 코어 함수는 ESM에서 제공하지만, CJS에서 이를 짜맞추기 방식으로 가져와서 매핑해서 제공하는 방식으로 CJS 환경에서도 동작하도록 호환성을 보장했던 것이었죠.&lt;/p&gt;
&lt;p&gt;그래서 22.11.0에서 &lt;code&gt;require(&quot;vite&quot;)&lt;/code&gt;로 가져오면 CJS Vite가 가져와져서 경고는 뜨지만, 정상적으로 동작했던 것이었어요. 의문이 하나 풀렸네요!!&lt;/p&gt;
&lt;p&gt;그런데 해결되지 않은 다른 의문이 있습니다. 22.12.0부터 &lt;code&gt;require(esm)&lt;/code&gt;을 제공하긴 하지만, 어차피 require로 받아온거니까 위 export field에 따르면 &lt;code&gt;index.cjs&lt;/code&gt;가 받아져서 경고만 뜨고 정상 구동되어야 하는거 아닐까요??&lt;/p&gt;
&lt;p&gt;다시 위로 가서 export 필드를 보면, 익숙한 &lt;code&gt;import&lt;/code&gt;, &lt;code&gt;require&lt;/code&gt; 말고도 &lt;code&gt;module-sync&lt;/code&gt;라는 낯선 친구가 있습니다. 이 친구는 뭐 하는 친구일까요??&lt;/p&gt;
&lt;p&gt;Vite는 공식적으로는 ESM을 지원해요. 현재는 CJS -&gt; ESM으로 넘어가는 과도기이고, 그렇기에 Dual export를 아직까지는 제공하지만, 추후 deprecated될 확률이 높아요.&lt;/p&gt;
&lt;p&gt;Node에서도 안정적인 마이그레이션을 위해 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하기 시작한 것이라는 생각이 들어요. Node 22.12.0부터는 어차피 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하는데, Vite에서 굳이 require라는 이유로 비공식적인 CJS를 지원할 필요가 있을까요??&lt;/p&gt;
&lt;p&gt;실제로 Vite 팀에서 같은 생각을 했고, module-sync라는 필드를 만들었어요. Node가 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하는 버전이라면 (&gt;= 22.12.0) &lt;code&gt;module-sync&lt;/code&gt;에 해당되고, 이때는 &lt;code&gt;require&lt;/code&gt;/&lt;code&gt;import&lt;/code&gt; 구분 없이 모두 ESM 모듈을 내보내게 돼요.&lt;/p&gt;
&lt;p&gt;하지만 ESM으로 내보내졌더라도, Node에서 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하기 때문에 에러가 발생하지 않아야 해요. 근데 왜 발생하고 있는 걸까요?? 원인은 Yarn PnP에 있었어요.&lt;/p&gt;
&lt;h2&gt;Yarn PnP의 모듈 로드 방식&lt;/h2&gt;
&lt;p&gt;Node의 module loader는 기본적으로 &lt;code&gt;node_modules&lt;/code&gt;에서 모듈을 찾도록 설계되어 있어요. 하지만 pnp는 &lt;code&gt;node_modules&lt;/code&gt;가 존재하지 않아요. pnp.cjs를 기반으로 모듈을 resolve하고 load하게 되죠. 이게 어떻게 가능할까요??&lt;/p&gt;
&lt;p&gt;Yarn PnP는 resolve step에서 &lt;code&gt;pnp.cjs&lt;/code&gt;를 통해 모듈을 찾게 하기 위해 Node.js의 &lt;code&gt;Module.\_resolveFilename&lt;/code&gt;이라는 module을 resolve하는 메소드를 monkey-patch하여 사용하고 있어요.&lt;/p&gt;
&lt;p&gt;하지만 Yarn 4.5.3에서 patch한 CJS loader에서 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하지 않았어요. 결국 Node는 지원을 하지만, Yarn PnP에서 패치한 module loader에서 &lt;code&gt;require(esm)&lt;/code&gt;에 대한 지원이 없어서 발생한 문제였어요.&lt;/p&gt;
&lt;p&gt;이는 다행히도 yarn 4.6.0에서 지원을 시작했어요.&lt;br/&gt;
어떻게 지원을 하게 되었는지 궁금해서 찾아봤는데 다음과 같은 조건문으로 &lt;code&gt;require(esm)&lt;/code&gt; 에러 여부를 제어하고 있었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20.245398773006134%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVR42l2P226CQBRF/QWppq0gYOQyM8BwKRpEiPGlxv//oNXDpDFpH1ZmHs5e+5xV8rToR09iU7prjxk67PVEMbSETca+NQStIuo0YWfw61zIHDvJfFYJH+WRjQ55UyGr5Fmhvr8Iiwg79dT3GTP26L5EDZZ0OhPLPzlXZJdGxFLQ5FKk8EX4bg4ii53sJTSPE14WoCVU3SfK20wxzujxQjrU+LLptkodS2gts+s8wMv3eL+il/AowuXkZejQpMRtQWCVO2krzY4iZmPkddtEfwT/+QHy3HSwpJtxsQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/8d526ab0550b8c5f14db4f80c3b2f0f6/a6d36/image-48.png&quot;
        srcset=&quot;/static/8d526ab0550b8c5f14db4f80c3b2f0f6/222b7/image-48.png 163w,
/static/8d526ab0550b8c5f14db4f80c3b2f0f6/ff46a/image-48.png 325w,
/static/8d526ab0550b8c5f14db4f80c3b2f0f6/a6d36/image-48.png 650w,
/static/8d526ab0550b8c5f14db4f80c3b2f0f6/e548f/image-48.png 975w,
/static/8d526ab0550b8c5f14db4f80c3b2f0f6/3c492/image-48.png 1300w,
/static/8d526ab0550b8c5f14db4f80c3b2f0f6/0ddab/image-48.png 2220w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;여기서 &lt;code&gt;process.features.require_module&lt;/code&gt;은 다음과 같이 Node에서 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하는지 안 하는지에 대한 flag에요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.950920245398773%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiUlEQVR42k3O2QrDIBAF0Pz/3wUiEsW3PgnV4IJL1VsdklLhOM6gFzdjDDjnkFJCCIHjOKCUonqeJxhj2PcdIQSsNcZYO9XHM1+21hqstdBaI6VEcs6klPI7r3vrQe+3v8DWO6HAWiuu6yLeewp3ziHGSD2ZvXMexhe8bzbW6TNnGS9tYV2kn34BZWPmba5i5wYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/8dcd4909c227d442451be2c92c095f7c/a6d36/image-47.png&quot;
        srcset=&quot;/static/8dcd4909c227d442451be2c92c095f7c/222b7/image-47.png 163w,
/static/8dcd4909c227d442451be2c92c095f7c/ff46a/image-47.png 325w,
/static/8dcd4909c227d442451be2c92c095f7c/a6d36/image-47.png 650w,
/static/8dcd4909c227d442451be2c92c095f7c/e548f/image-47.png 975w,
/static/8dcd4909c227d442451be2c92c095f7c/8b70b/image-47.png 1266w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;결국 Node에서 &lt;code&gt;require(esm)&lt;/code&gt;을 지원하는 버전이라면 &lt;code&gt;require(esm)&lt;/code&gt; 오류가 우회되는 방식이었어요. 그럼 4.6.0으로 업데이트하면 되겠네요!!!&lt;/p&gt;
&lt;h2&gt;또 다른 에러...&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;require(esm)&lt;/code&gt; 에러는 예상대로 해결됐어요. 하지만 또 다른 에러를 마주하게 되었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30.061349693251532%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVR42k2R6Y7CMAyE+xAI2i5Nj6QJAsEiji09uN//mcyMlZX4MbJb2V/GdtI5J6fGyjN4KMjUtnL1Xi7Wytg66RAHxB7a17Ucm0a1Q26LQtqolTGyrSpJmJxso00XZ2UiDPGu0Sl0QPwD+LeuZIemA4ABfQT5qDzLZDafS5KlqRa/4e4FnVFMhyOcDtBN5dX5FPP3KiiQvSbPZQkYcyohuYcDjvv0QR3dI3DU8QHBN+M1ApnTBN0GU8hPBKb/wM5ZBT6iCKSbBx5gszrFv2+xno9zb5uyVLACSedOCKEGwHvrdKeE9u7rONwxpuEaeJh1aXAMHmWpoy8A/ADmoq8rIKwNXAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/625fd06b3eb6adad91cdc8a4d7dbbc92/a6d36/image-46.png&quot;
        srcset=&quot;/static/625fd06b3eb6adad91cdc8a4d7dbbc92/222b7/image-46.png 163w,
/static/625fd06b3eb6adad91cdc8a4d7dbbc92/ff46a/image-46.png 325w,
/static/625fd06b3eb6adad91cdc8a4d7dbbc92/a6d36/image-46.png 650w,
/static/625fd06b3eb6adad91cdc8a4d7dbbc92/e548f/image-46.png 975w,
/static/625fd06b3eb6adad91cdc8a4d7dbbc92/3c492/image-46.png 1300w,
/static/625fd06b3eb6adad91cdc8a4d7dbbc92/c678a/image-46.png 1739w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rollup&lt;/code&gt;을 찾을 수 없다고...? 이번 에러는 정말 감이 잡히지 않았어요.&lt;br/&gt;
&lt;code&gt;rollup&lt;/code&gt;을 의존성으로 가지고 있는 Vite에서 뭔가 알지 않을까 해서 Maintainer분께 물어보게 되었고, Maintainer분께서는 Yarn PnP의 이슈인 것 같다며 Discussion 링크를 주셨어요. 그곳에서 해답을 얻을 수 있었어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 74.84662576687117%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACb0lEQVR42nVUaZfaMAz0176WXW6SQCAHkJNwhXAte7X//y9NNUpgX/vaDxM7sixrPJLNNIgxCxN481QxC2OFt5D5PGnWksaewF9mOobRCtzrLzLd5y9yDOwZzP54Q3V5x+nlA5fXT8FPnG+fisP5DcfrB6rrO7bVFev9GeXpFZvDBZvygp3YdtULdscX8XtHstrB8LQo22IeFxjPFnD9pZwcPcDMnOkczz0bT11LUc9Hj/87Wp0RDD8Mlm8qBMtcQRpKW6jQ8Vurh+/PA/xoD3XTffwXTGfgIF2XOAnFWFKO8p0eEGUbzZxBu8OJojMYa7D/QQPS0RGq82QNW6i5foSJtxRRMkzD5CEYRaiDj9HuOw/wkE5zGP9NnG+RrQ9YphukRYlYMiR92vmfFvsGpRxaqO9qexSfA4rdEcX+pAKF8Qq9kQtDIRiMGSQSjFkwS27mGgMzW7XxKsRnLAyeOlaTpa0ikS7v2QQSiCVhTQIMHA89a6o1NfEi2O5cr6M7dKX+cjksk1rz0LdmcmdfQtzvjwKaQE7dHl8RC6W+7eO5P0YQryVQBDdI5R5TtLoOgqiQ/0TWRSAJ2GqP/lD9IQozYJmEQpGi8BR7GmrVD8c+LDeUgJaOtD31aqp/1yXBoIYCsPK3iisub7+wLs9a+ewAdsNBOokdQh92D1E1tn3jU13esJBKMZnUIC+bfUkR2B0cWToTGevuka7R/hZxxM+WbGkjuM5OcoQVS8dQ3TDKNZDr1a1GJ30I+EDIyDU+EPWY6lwfDAnORO42tq1hDZWnmzZ5TeGmFGgjHdLj2uFc0yM1zmnjnA8GNQiaV+g31VKpSq++mBcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/c0da4ad0584e5ed9bfe29b74984387bf/a6d36/image-49.png&quot;
        srcset=&quot;/static/c0da4ad0584e5ed9bfe29b74984387bf/222b7/image-49.png 163w,
/static/c0da4ad0584e5ed9bfe29b74984387bf/ff46a/image-49.png 325w,
/static/c0da4ad0584e5ed9bfe29b74984387bf/a6d36/image-49.png 650w,
/static/c0da4ad0584e5ed9bfe29b74984387bf/e548f/image-49.png 975w,
/static/c0da4ad0584e5ed9bfe29b74984387bf/5c744/image-49.png 1206w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Node는 &lt;code&gt;require(esm)&lt;/code&gt;을 구현할 때 ESM 모듈 내부의 정적 import를 처리하기 위해 특별한 경로를 사용했어요.&lt;br/&gt;
이 경로는 CJS 로더 파이프라인(&lt;code&gt;Module.\_resolveFilename&lt;/code&gt;)도 통과하지 않았고, ESM 로더 파이프라인(&lt;code&gt;--loader&lt;/code&gt; / &lt;code&gt;module.register()&lt;/code&gt;)도 완전히 활용되지 않았어요.&lt;/p&gt;
&lt;p&gt;이 특수한 경로가 노출되어 있지 않았기에, PnP에서 이 경로에 개입해서 커스텀할 수 있는 방법이 존재하지 않았어요. 결국 이 경우 Node의 기본 동작으로 fallback하게 되고 &lt;code&gt;node_modules&lt;/code&gt;에서 패키지를 열심히 찾지만 &lt;code&gt;node_modules&lt;/code&gt;이 없는 PnP에서 발견될 리가 없죠. 결국 &lt;code&gt;Module_not_found&lt;/code&gt; 오류가 발생하게 돼요.&lt;/p&gt;
&lt;p&gt;Vite 내부에서 &lt;code&gt;rollup&lt;/code&gt; 내부 모듈을 정적 import로 가져오는 부분이 있는데, 위와 같은 이유로 &lt;code&gt;rollup&lt;/code&gt;을 &lt;code&gt;node_modules&lt;/code&gt;에서 찾아버린 바람에 못 찾게 된 것이었어요.&lt;/p&gt;
&lt;h2&gt;Node 23.5.0&lt;/h2&gt;
&lt;p&gt;그러던 중, Node 23.5.0에 큰 변화가 오게 됩니다. Node에서 &lt;code&gt;module.registerHooks&lt;/code&gt;라는 API를 공개했는데, 이 API를 사용하면 모듈 로더 파이프라인에 공식적으로 개입이 가능해지게 돼요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.423312883435585%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABTUlEQVR42o3RXU7bQBDAcd8C1AtQVM6D+ggq3KNEhb71EAQUcQsOABKWKkocAjROvPbu2iQ4hmT98e8koEq0PLDSTzOr2dXsh6fihJ+/ugTXfS6vAoL+DT1xFfS47Ab0b+9wZcl7h/eQWe5VyFjHuHxCWUxwU4kLj/lSPSvezbv5sYu/tYb/ZR1/+yP+7gb+zgYXO584//yB881Vzv5aefGcL2r/8szpCb/bLcLOdwbtPcLjb4w6+6jOAaOjltgjkrh0/Fp4+PU/Xi33zooZYTomnk/R7gnX1BRNxaPEWd1Q1It5zdRVTOflcywrmuaNN2xkcV06EhWRphp7H5ONE6GJ0yEmVRijiMyAYXyHikKiYcgoHKBlj5s9QV1BVdJUDi9/yJlM5HRWYVOLlU8yVi9zkxqhpVG6zBObkJgEraVuLUpLM2mc5ZmwzN2cP8xg6hpHFFF4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/58f22a3ae81dbf35d97fbb1d3c6eecac/a6d36/image-50.png&quot;
        srcset=&quot;/static/58f22a3ae81dbf35d97fbb1d3c6eecac/222b7/image-50.png 163w,
/static/58f22a3ae81dbf35d97fbb1d3c6eecac/ff46a/image-50.png 325w,
/static/58f22a3ae81dbf35d97fbb1d3c6eecac/a6d36/image-50.png 650w,
/static/58f22a3ae81dbf35d97fbb1d3c6eecac/e548f/image-50.png 975w,
/static/58f22a3ae81dbf35d97fbb1d3c6eecac/3c492/image-50.png 1300w,
/static/58f22a3ae81dbf35d97fbb1d3c6eecac/e4ba2/image-50.png 1468w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;PnP도 기존에 비공식적인 방법으로 monkey-patch해서 사용했지만, &lt;code&gt;module.registerHooks&lt;/code&gt;를 사용하면 monkey-patch 없이 공식적으로 개입이 가능해진 거죠. 심지어 기존에 불가능했던 &lt;code&gt;require(esm)&lt;/code&gt; 내부 정적 import 파이프라인에 대한 개입도 가능해졌고, PnP에서 완전히 &lt;code&gt;require(esm)&lt;/code&gt;을 지원할 수 있게 되었어요.&lt;/p&gt;
&lt;p&gt;실제로 Node 버전을 23.5.0 이상으로 올리게 되면, 에러가 말끔히 사라지게 돼요.&lt;/p&gt;
&lt;h2&gt;느낀 점&lt;/h2&gt;
&lt;p&gt;이슈의 원인을 파고들면서 모듈 시스템에 대해 한층 깊게 이해할 수 있게 되었고, Node &lt;code&gt;CJS&lt;/code&gt;/&lt;code&gt;ESM&lt;/code&gt; loader가 모듈을 각각 어떻게 로드하는지, Vite는 어떻게 &lt;code&gt;ESM&lt;/code&gt;/&lt;code&gt;CJS&lt;/code&gt;를 둘 다 지원하는지, Yarn PnP는 어떻게 모듈을 로드하는지를 직접 코드를 뜯어보며 이해하가는 과정이 즐거웠던 것 같아요.&lt;/p&gt;
&lt;p&gt;모듈 시스템의 과도기에서만 겪을 수 있는 이슈를 겪고, 원인을 파악해가는 과정에서 많은 것을 배우고 느낄 수 있었던 것 같습니다.&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[Apollo to Relay 마이그레이션]]></title><description><![CDATA[GraphQL을 공부하면서 실제 예제에 적용해보기 위해 서버 지인과 협업하여 당근마켓 중고거래 페이지 및 거래 품목 추가 페이지를 클론코딩해보았어요. GraphQL 사용 자체가 처음이었기 때문에, 처음에는 비교적 러닝커브가 낮은 Apollo…]]></description><link>https://jungwoo3490.github.io/blog/relay-migration/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/relay-migration/</guid><pubDate>Tue, 02 Jul 2024 21:01:00 GMT</pubDate><content:encoded>&lt;p&gt;GraphQL을 공부하면서 실제 예제에 적용해보기 위해 서버 지인과 협업하여 당근마켓 중고거래 페이지 및 거래 품목 추가 페이지를 클론코딩해보았어요.&lt;/p&gt;
&lt;p&gt;GraphQL 사용 자체가 처음이었기 때문에, 처음에는 비교적 러닝커브가 낮은 Apollo Client를 사용해서 개발했어요.
패키지 설치만 하면 따로 크게 추가 설정해줄 필요 없이 바로 사용이 가능해서 정말 편리했습니다.&lt;/p&gt;
&lt;p&gt;Apollo Client는 공식문서에 사용 방법이 아주 잘 나와있으니 참고하면 좋아요.&lt;/p&gt;
&lt;h2&gt;기존 Apollo Client 사용한 구현 과정&lt;/h2&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;0&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ApolloClient&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;uri:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;{서버 엔드포인트}&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;cache:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;InMemoryCache&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;먼저 &lt;code&gt;ApolloClient&lt;/code&gt; 인스턴스를 생성해주었어요. uri에는 서버 엔드포인트 주소를 지정하였고, cache에 &lt;code&gt;InMemoryCache()&lt;/code&gt;를 사용하여 메모리 기반의 캐시를 생성해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;1&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ApolloProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RouterProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ApolloProvider&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;애플리케이션 최상위 컴포넌트를 &lt;code&gt;ApolloProvider&lt;/code&gt; 컴포넌트로 감싸고, &lt;code&gt;ApolloProvider&lt;/code&gt; 컴포넌트에 위에서 생성한 Apollo Client 인스턴스인 &lt;code&gt;client&lt;/code&gt;를 전달하여 Apollo Client의 기능을 전역으로 제공하도록 해주었어요.&lt;/p&gt;
&lt;p&gt;다음은 제품 목록을 가져오는 부분이애요. &lt;code&gt;Products&lt;/code&gt;라는 GraphQL 쿼리를 정의하였고, &lt;code&gt;useQuery&lt;/code&gt;를 사용하여 정의한 &lt;code&gt;GET_PRODUCTS&lt;/code&gt; 쿼리를 실행하여 서버로부터 데이터를 받아왔어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;2&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;GET_PRODUCTS&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;gql&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  query Products {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    products {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      id&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      uploadDate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; } = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useQuery&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;GET_PRODUCTS&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;다음은 제품을 추가하는 부분입니다. &lt;code&gt;addProduct&lt;/code&gt;라는 GraphQL의 mutation을 정의하였고, &lt;code&gt;useMutation&lt;/code&gt;에서 &lt;code&gt;refetchQueries&lt;/code&gt; 옵션을 설정해주어 제품을 추가하고 나서 제품 목록 데이터를 새로 갱신하도록 해주었어요.&lt;/p&gt;
&lt;p&gt;폼을 제출하면 호출되는 &lt;code&gt;handleSubmit&lt;/code&gt; 함수에서 &lt;code&gt;mutationFn&lt;/code&gt;을 호출하여 mutation을 실행해 제품을 추가하도록 했어요. &lt;code&gt;variables&lt;/code&gt;를 통해 mutation에 필요한 추가할 제품에 대한 데이터들을 전달해주었습니다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;3&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;ADD_PRODUCT&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;gql&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;mutation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;AddProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$title&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$imageUrl&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$price&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Int&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    ) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;addProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;imageUrl&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;$location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      ) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;id&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;uploadDate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  ;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;mutationFn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }] = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useMutation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;ADD_PRODUCT&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,  {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;refetchQueries:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [{ &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;query:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;GET_PRODUCTS&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }],&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  });&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleSubmit&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;mutationFn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({ &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; });&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  };&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Apollo를 사용해서 구현하고 나니, Relay도 경험해보고 싶은 욕심이 생겼어요. 그래서 Relay로 마이그레이션을 시도해보기로 했어요.&lt;/p&gt;
&lt;p&gt;그 과정에서 시행착오도 아주 많았고, 성공한 과정을 중점적으로 기록하려고 해요.&lt;/p&gt;
&lt;h2&gt;Relay로 마이그레이션&lt;/h2&gt;
&lt;h3&gt;1. 스키마 파일 생성&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;/src/schema/schema.graphql&lt;/code&gt;에 다음과 같이 스키마를 추가해주었어요. 이 스키마는 서버에서 정의한 스키마와 동일한 구조로 세팅해주어야 해요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;graphql&quot; data-index=&quot;4&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;type Product {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  id: ID!&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  title: String!&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  imageUrl: String&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  price: Float!&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  location: String!&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  uploadDate: String!&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;type Query {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  products: [Product]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;type Mutation {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  addProduct(&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;    title: String&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;    imageUrl: String&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;    price: Int&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;    location: String&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;    content: String&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;  ): Product&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;2. Relay 컴파일러 세팅&lt;/h3&gt;
&lt;p&gt;GraphQL 쿼리를 컴파일하기 위한 Relay 컴파일러를 설치해줍니다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;sh&quot; data-index=&quot;5&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;yarn add --dev relay-compiler&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그리고, &lt;code&gt;package.json&lt;/code&gt; script에 다음과 같이 세팅해줍니다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;6&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;scripts&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;relay&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;relay-compiler&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;3. Relay 컴파일러 설정파일 추가&lt;/h3&gt;
&lt;p&gt;프로젝트 root 경로에 &lt;code&gt;relay.config.json&lt;/code&gt; 파일을 만들고 다음과 같이 작성해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;7&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;src&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;./src&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;schema&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;./src/schema/schema.graphql&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;language&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;typescript&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;각 옵션값은 다음을 의미해요.&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;src&lt;/strong&gt;: Relay 컴파일러가 소스 코드를 검색할 디렉토리에요. 프로젝트 내의 모든 소스 파일들이 src 폴더 내에 위치했으므로, ./src로 지정해주었어요.&lt;br/&gt;
• &lt;strong&gt;schema&lt;/strong&gt;: GraphQL 스키마 파일의 위치예요. 1에서 생성한 파일 경로를 지정하면 됩니다.&lt;br/&gt;
• &lt;strong&gt;language&lt;/strong&gt;: 사용 언어를 지정해요. TS로 개발했으므로 typescript로 지정하면 돼요.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;이렇게 해두면 이후에 &lt;code&gt;yarn run relay&lt;/code&gt; 명령을 통해 GraphQL 쿼리 파일을 컴파일할 수 있어요.&lt;/p&gt;
&lt;h3&gt;4. babel-plugin-relay 세팅&lt;/h3&gt;
&lt;p&gt;Relay는 GraphQL 쿼리를 실행 시에 사용할 수 있는 코드로 변환해야 하는데, 이 변환 작업을 &lt;code&gt;babel-plugin-relay&lt;/code&gt;가 담당해요.&lt;/p&gt;
&lt;p&gt;다음 명령어로 Babel 플러그인과 GraphQL 라이브러리를 설치해줍니다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;sh&quot; data-index=&quot;8&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;yarn add --dev babel-plugin-relay graphql&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그 후 &lt;code&gt;.babelrc&lt;/code&gt; 파일에 다음과 같이 relay 플러그인을 추가해줍니다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;9&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;plugins&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: [&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;relay&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;5.GraphQL 쿼리 파일 작성&lt;/h3&gt;
&lt;p&gt;서버로부터 데이터를 가져오기 위한 GraphQL 쿼리를 정의하는 파일을 생성해줍니다.&lt;/p&gt;
&lt;p&gt;제품 목록을 가져오는 query, 제품을 새로 등록하는 mutation 쿼리 파일을 각각 생성해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;10&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// getProducts.ts&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// 물품 목록을 가져오는 query&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; } &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;react-relay&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;getProducts&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  query getProductsQuery {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    products {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      id&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;getProducts&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;11&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// addProduct.ts&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// 물품을 새로 등록하는 mutation&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; } &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;react-relay&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;addProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  mutation addProductMutation(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    $title: String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    $imageUrl: String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    $price: Int&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    $location: String&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  ) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    addProduct(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      title: $title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      imageUrl: $imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      price: $price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      location: $location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    ) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      id&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      title&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      imageUrl&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      price&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      location&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;      uploadDate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk8&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;addProduct&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;6. GraphQL 쿼리 컴파일&lt;/h3&gt;
&lt;p&gt;쿼리 파일까지 잘 작성해주었다면, 다음 명령어를 통해 relay 컴파일러를 실행하여 GraphQL 쿼리를 컴파일하면 돼요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;sh&quot; data-index=&quot;12&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;yarn run relay&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;성공적으로 컴파일되었다면, 다음과 같은 성공 로그가 뜨고,&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.22085889570552%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWUlEQVR42jWPS2/TUBCF/SOCqHz9iu/1I347IbZx6gaoqornClFgASuWVdiRtuqKH/4xOOri05kZac7MsertC0Lfpbj6yfmPvwxfjgxf7xlu7hm/PdDf3LH+/Mj0/Rd/7p7z+7DgcHjG7e2C43HB9bXN2ZmP73t4noe1HQr6fmCadlRlQRwZIhMS6RAdhiSxIZFZEkcEvkYpD8fxRZ84GT1hdV3Jer0WNtR1TdO2VFU912maCiuSJCGOY0I54jgK13VmPM8VPeE4zqxWtdnx/t1bLvavGMcde9FpumDbdeR5QbBcorVBG0MYLsU8EvMTxuiZKPpfmxmr7c/59PED49Cze9lxdfmayzd7tpuWMl9J9CV1mVFkGUEQkWWNfF2xWlVyKBXN5zR5nlOWJVY/Tgx9R9tPJPWAF5UEaYMr6uh87pWWmcRuGiXL9kxV2dLb8pXCttUcWSnFPyISuM6HPDZaAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/a7d171b3d421432ebe1695dc381dcb3e/a6d36/image-34.png&quot;
        srcset=&quot;/static/a7d171b3d421432ebe1695dc381dcb3e/222b7/image-34.png 163w,
/static/a7d171b3d421432ebe1695dc381dcb3e/ff46a/image-34.png 325w,
/static/a7d171b3d421432ebe1695dc381dcb3e/a6d36/image-34.png 650w,
/static/a7d171b3d421432ebe1695dc381dcb3e/e548f/image-34.png 975w,
/static/a7d171b3d421432ebe1695dc381dcb3e/d56e1/image-34.png 1130w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;쿼리 파일이 위치한 경로에 &lt;code&gt;__generated__&lt;/code&gt; 라는 폴더가 생성되면서 폴더 내부에 컴파일된 쿼리가 생성되게 돼요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 610px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 43.558282208588956%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2klEQVR42n2QWW/TUBBGDQheEKLlharQJqmXOEtJQ2O7juPlem26hAoqUEu6ICXiF/AEEhJ//DAuilQhwcPRnZl7Z+73jXamTJYf+0RhTB4F6I0tjOY2hpxms4Gtt4Tm/zFaWK0tvP0hWkOdU80usPIrtrI5evGZVnqJns9pqAueO+9Yc89YF1bn/XhN7teFZ/szzPQT2tNkyay4xSoWGOffCJe/GM6/4335ydvrH7wovvLo4OoP/jUP/4ofBzc8CW554N+wXS3ROp0uG07Gy+mCOFbk0xlRVjFJcuK8ojo6JSuPqI5n+GFCXh1TSi3OStJiit0bYNp9dKuL443RepZBa+DxOn7P2HNJlSLwx8RhJHsNCSeTO8a+L3WfLE2JJJ8EAXuDAZZpYhoG+s4OzmiE1rXbtEYRm9klKhEFhaiTYWmaoYQsLyjKiihOqA6nlNUhcaJIVIot7kyrTdvuYJgWjuuh9XffsHm0YBhmnJ6eUEpTIU2pDFJZjitqLWno9HfFXh+727ujI3FPelfU+TiYoNm2zatiTs9PycVO/XutpiaM4rtfawW1mvu0a6S+uquVut4BWr2DjegDe5OUaVkSil0ldlRtS3BloL6jy57Mf2KJ3fqNM3L4DeozJW4HGuSuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/cdcd7a5acdff93f3e0b64bdc5dce5e73/5aae9/image-35.png&quot;
        srcset=&quot;/static/cdcd7a5acdff93f3e0b64bdc5dce5e73/222b7/image-35.png 163w,
/static/cdcd7a5acdff93f3e0b64bdc5dce5e73/ff46a/image-35.png 325w,
/static/cdcd7a5acdff93f3e0b64bdc5dce5e73/5aae9/image-35.png 610w&quot;
        sizes=&quot;(max-width: 610px) 100vw, 610px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;7. Relay Environment 설정&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;src&lt;/code&gt; 경로에 Relay Environment를 설정하기 위한 파일을 만들어주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;13&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;RecordSource&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; } &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;relay-runtime&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RecordSource&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphqlEndpoint&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;{서버 엔드포인트}&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphqlEndpoint&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;method:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;POST&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;headers:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;body:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;query:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }).&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handlerProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handlerProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;environment&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;각 부분은 다음과 같아요.&lt;/p&gt;
&lt;h4&gt;※ RecordSource &amp;#x26; Store 설정&lt;/h4&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;14&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RecordSource&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;RecordSource&lt;/code&gt; 객체를 생성하여 Relay가 관리하는 데이터 소스를 설정하고, 이 소스를 바탕으로 &lt;code&gt;Store&lt;/code&gt; 객체를 생성해요.&lt;br/&gt;
&lt;code&gt;Store&lt;/code&gt; 객체는 클라이언트 측의 데이터 캐시 역할을 합니다.&lt;/p&gt;
&lt;h4&gt;※ Network 설정&lt;/h4&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;15&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;Network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphqlEndpoint&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;{서버 엔드포인트}&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;graphqlEndpoint&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;method:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;POST&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;headers:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;body:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;query:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }).&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;graphqlEndpoint&lt;/code&gt;를 서버의 엔드포인트로 지정해주면 돼요.&lt;br/&gt;
지정한 엔드포인트에서 데이터를 fetch해서 json 형식으로 변환하게 됩니다.&lt;/p&gt;
&lt;p&gt;여기서 &lt;code&gt;method&lt;/code&gt;가 &lt;code&gt;POST&lt;/code&gt;로 고정된 이유는 GraphQL은 단일 엔드포인트에서 여러 종류의 요청을 처리해야 하기 때문에 일반적으로 &lt;code&gt;POST&lt;/code&gt; 방식을 사용해서 query와 mutation을 처리하기 때문이에요.&lt;/p&gt;
&lt;h4&gt;※ Handler Provider 설정&lt;/h4&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;16&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handlerProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Relay의 Handler를 제공할 때 사용하는 변수인데, 따로 사용이 필요하지 않아 &lt;code&gt;null&lt;/code&gt;로 설정해주었어요.&lt;/p&gt;
&lt;h4&gt;※ Environment 설정&lt;/h4&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;17&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handlerProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;network&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Environment 클래스를 사용하여 Relay 환경을 설정했어요. 인자로 &lt;code&gt;handleProvider&lt;/code&gt;, &lt;code&gt;network&lt;/code&gt;, &lt;code&gt;store&lt;/code&gt; 설정값을 주어 Relay가 GraphQL 요청을 처리하고 데이터를 캐시하는 데 필요한 모든 구성 요소를 포함시키게 돼요.&lt;/p&gt;
&lt;h3&gt;7. 전역으로 Relay 환경설정 제공&lt;/h3&gt;
&lt;p&gt;App.tsx에서 &lt;code&gt;RelayEnvironmentProvider&lt;/code&gt; 컴포넌트를 통해 위에서 설정했던 환경설정을 전역으로 제공하도록 세팅해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;18&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;() {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;createBrowserRouter&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;([&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;path:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;element:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;MainPage&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;path:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/add&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;element:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;AddPage&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  ])&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RelayEnvironmentProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RouterProvider&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RelayEnvironmentProvider&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  )&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;8. GraphQL query 통신&lt;/h3&gt;
&lt;p&gt;GraphQL query를 통해 전체 상품 목록을 받아와봅시다.&lt;/p&gt;
&lt;p&gt;Relay에서 제공하는 &lt;code&gt;useLazyLoadQuery&lt;/code&gt;를 사용해서 데이터를 받아올 수 있어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;19&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useLazyLoadQuery&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;getProductsQuery&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, {})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;첫 번째 인자로 실행할 GraphQL 쿼리를 정의한 객체를 전달하면 돼요.&lt;br/&gt;
두 번째 인자로는 쿼리에 전달할 변수를 포함하는 객체를 전달하는데, 현재 쿼리에 변수가 없으므로 빈 객체를 전달했어요.&lt;/p&gt;
&lt;p&gt;실제로 데이터가 잘 받아와진 것을 확인할 수 있어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 47.852760736196316%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVR42mWS547bMBCE9TCxJFuNRRSLLLn3O6ccUt7/RSZDOkAC5MdgQUr8drZkqjcQUiF4j946FKsGy3yBZblEWZZJy4Iqi5eKv7EscrRCw44bGD+TY5CFzRUDD+M0IYSAqreoh4BV20EKga5rUWmDSlH9gNoG1IyVcWhopKlW6GrD2KCpK2RmcDDOoVY9eiUhph3E+R0yrLFmguhabM/o5gPE4Q7Jb2J3gTw+oK2FD3uM4QE3jtCGDq1bw/oRHcHW9OhoX53487TFEEYYSm6OhN0geZ+A+yuB96T++Qv68Q369oVJjwT6icCAztgEFHSi5x1GZ9mXgDa6IUTfv0LxkSAkAqP04wP67SNFRcWkmQvzC8jeGK0g5316OLBk7x1Ln1KJKkJ5L09v6aHYnQl/0OEP6ucrGZNkfn2AY1ltBLIHynoIPtLHGxT76Tn96LTbnljiLblNik4JVtfPUNE9lYBu3MFyKE0cDoGSMQHHiTAOhRKxh7Fn1yfk5fmn5Ms/QPbw/XuqJNN2jcFNaNWAtm0hlOZqjKikTmvTNg1Xpk+rUg/+Ja5RzfVK9zw3bkTj1+mcGQ7CcjUGLvg8T8llvviEMs+RUwUXuIgxarF4qcj/v+ObeP4NAJtJHc6cS1kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/29d537b25a64552742b5bca8ecc2f404/a6d36/image-36.png&quot;
        srcset=&quot;/static/29d537b25a64552742b5bca8ecc2f404/222b7/image-36.png 163w,
/static/29d537b25a64552742b5bca8ecc2f404/ff46a/image-36.png 325w,
/static/29d537b25a64552742b5bca8ecc2f404/a6d36/image-36.png 650w,
/static/29d537b25a64552742b5bca8ecc2f404/e548f/image-36.png 975w,
/static/29d537b25a64552742b5bca8ecc2f404/3c492/image-36.png 1300w,
/static/29d537b25a64552742b5bca8ecc2f404/133ae/image-36.png 1424w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;9. GraphQL mutation 통신&lt;/h3&gt;
&lt;p&gt;먼저 &lt;code&gt;useMutation&lt;/code&gt; hook을 사용하여 &lt;code&gt;addProduct&lt;/code&gt; mutation을 실행하는 함수 &lt;code&gt;commitAddProduct&lt;/code&gt;을 생성했어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;20&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;commitAddProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useMutation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;addProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그 후, 폼 제출시 실행할 &lt;code&gt;handleSubmit&lt;/code&gt; 함수를 다음과 같이 정의해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;21&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleSubmit&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;commitAddProduct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variables:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { ...&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;onCompleted&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;onError&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;handleSubmit&lt;/code&gt;은 &lt;code&gt;commitAddProduct&lt;/code&gt; 함수를 호출하여 &lt;code&gt;addProduct&lt;/code&gt; mutation을 실행해요.
여기서, mutation에 전달할 변수가 존재하므로, &lt;code&gt;variables&lt;/code&gt; 속성에 폼에서 수집한 &lt;code&gt;values&lt;/code&gt; 객체 state의 프로퍼티들을 전달해주었어요.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;onCompleted&lt;/code&gt; 콜백 함수는 mutation이 성공적으로 완료된 후에 호출돼요. 물품을 성공적으로 추가하면 홈 화면으로 이동하도록 해주었어요.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;onError&lt;/code&gt; 콜백 함수는 mutation이 에러를 반환할 때 호출돼요. 별도의 에러페이지가 없어서 console에 에러를 로깅하도록 위와 같이 설정해주었는데, 실제론,ㄴ 별도의 에러페이지를 만들어 에러페이지로 리다이렉트하도록 예외처리를 해주는 게 좋을 것 같다는 생각을 했습니다.&lt;/p&gt;
&lt;h3&gt;캐시 데이터 대신 최신 데이터 받아오기&lt;/h3&gt;
&lt;p&gt;통신은 잘 됐는데, 다음과 같이 제품을 등록하고 홈 화면으로 이동하면 추가한 제품이 반영이 안 되어있고, 새로고침을 해야 반영되는 문제가 있었어요.&lt;/p&gt;
&lt;video width=&quot;300&quot; controls&gt;
  &lt;source src=&quot;https://github.com/jungwoo3490/jungwoo3490/assets/60962533/2221e194-7368-4189-b60a-c05052fb5720&quot; type=&quot;video/mp4&quot;&gt;
&lt;/video&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;p&gt;Relay에서는 기본적으로 데이터를 클라이언트 측에 캐싱해요.&lt;/p&gt;
&lt;p&gt;캐시 데이터를 사용하기 때문에 위 화면과 같이 제품을 성공적으로 등록하고 홈 화면으로 이동해도 제품 목록에 바로 뜨지 않고 새로고침을 해야 반영되는 것이었어요.&lt;/p&gt;
&lt;p&gt;Apollo Client에서는 이 문제를 &lt;code&gt;refetchQueries&lt;/code&gt;를 통해 mutation 후에 데이터를 갱신하도록 하여 해결했는데, Relay에서는 어떻게 하면 될까요?&lt;/p&gt;
&lt;p&gt;여러 방법이 있을 수 있지만, 나는 &lt;code&gt;useLazyLoadQuery&lt;/code&gt;의 &lt;code&gt;fetchPolicy&lt;/code&gt;를 &lt;code&gt;&apos;network-only&apos;&lt;/code&gt;로 설정하여 항상 새로운 데이터를 네트워크에서 가져오도록 해서 해결했어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;22&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useLazyLoadQuery&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;getProductsQuery&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  {},&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;fetchPolicy:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;network-only&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 설정해준 결과, 제품을 성공적으로 등록하고 홈 화면으로 이동하면 방금 추가한 제품이 목록에 바로 반영되는 것을 확인할 수 있었습니다.&lt;/p&gt;
&lt;video width=&quot;300&quot; controls&gt;
  &lt;source src=&quot;https://github.com/jungwoo3490/jungwoo3490/assets/60962533/e485e394-23e4-41ad-a33c-67eee9f36d79&quot; type=&quot;video/mp4&quot;&gt;
&lt;/video&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .mtk17 { color: #808080; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[React-Router useLocation 사용 중 마주친 버그 개선하고 기여하기]]></title><description><![CDATA[…]]></description><link>https://jungwoo3490.github.io/blog/react-router-contribution/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/react-router-contribution/</guid><pubDate>Fri, 17 May 2024 12:29:00 GMT</pubDate><content:encoded>&lt;p&gt;프로젝트 도중 다음과 같은 옵션 전환 모달 구현을 맡게 되었어요.&lt;/p&gt;
&lt;video width=&quot;300&quot; controls&gt;
  &lt;source src=&quot;https://github.com/jungwoo3490/jungwoo3490/assets/60962533/0352d842-4a62-4e66-b0b9-aca75ba48daf&quot; type=&quot;video/mp4&quot;&gt;
&lt;/video&gt;
&lt;p&gt;다음과 같이 모달을 눌렀을 때 현재 선택된 옵션이 아닌 다른 옵션들을 리스트 형식으로 보여줘야 했고, 그 옵션을 클릭하면 모달이 닫힘과 동시에 모달 텍스트가 내가 선택한 옵션으로 바뀌고, 모달을 다시 열면 동일하게 현재 선택된 옵션이 아닌 다른 옵션들을 리스트 형식으로 보여줘야 했어요.&lt;/p&gt;
&lt;p&gt;다음과 같이 각 옵션을 0, 1, 2의 number값으로 관리하도록 시도했어요.
선택된 옵션은 부모 컴포넌트에서 관리하였으므로, 선택되지 않은 옵션값들을 filter 메소드를 활용하여 필터링하여 selectedModalOptionList prop으로 모달 컴포넌트에 넘겨주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;0&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalOn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;amp;&amp;amp; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;SelectModal&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalOn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalOn&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;() &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setModalOn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setSelectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedModalOptionList&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; !== &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  )&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;문제는 여기서 발생했어요. 이전 페이지에서 어떤 탭을 클릭하느냐에 따라 초기 선택 옵션값을 다르게 해야 했어요.&lt;/p&gt;
&lt;p&gt;여기서 handleClickTab이 각 탭에 할당되는 클릭 이벤트 핸들러인데, 다음과 같이 즐겨찾기한 레큐북을 누르면 0, 내가 만든 레큐북을 누르면 1, 내가 남긴 레터를 누르면 2를 다음 페이지로 navigate함과 동시에 state 값으로 실어 보내려고 했어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;1&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;HistoryEnterList&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useMemo&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;title:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;즐겨찾기한 레큐북&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variant:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;book&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;image:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ImgMypageFavoriteLecueBook&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; /&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleClickTab&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/mypage/history&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;title:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;내가 만든 레큐북&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variant:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;book&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;image:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ImgMypageMakeLecueBook&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; /&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleClickTab&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/mypage/history&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;title:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;내가 남긴 레터&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;variant:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;letter&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;image:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ImgMypageLetter&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; /&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleClickTab&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/mypage/history&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  ],&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  []&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;보낸 값을 useLocation으로 받아서 내 기록보기 페이지에서 선택된 옵션을 관리하는 state의 초기값으로 세팅해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;2&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useLocation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;setSelectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그런데, 문제가 발생했어요.&lt;/p&gt;
&lt;video width=&quot;300&quot; controls&gt;
  &lt;source src=&quot;https://github.com/jungwoo3490/jungwoo3490/assets/60962533/a292dd61-c1e0-4180-b821-3d677bc9eb88&quot; type=&quot;video/mp4&quot;&gt;
&lt;/video&gt;
&lt;p&gt;이렇게 &quot;즐겨찾기한 레큐북&quot;을 누를 때만 옵션이 제대로 선택이 되지 않았어요.&lt;br/&gt;
옵션 값이 어떻게 넘어오는지 확인하기 위해 내 기록보기 페이지에서 &lt;code&gt;selectedOption&lt;/code&gt;을 console에 찍어본 결과, 신기한 일이 발생했어요.&lt;/p&gt;
&lt;video width=&quot;600&quot; controls&gt;
  &lt;source src=&quot;https://github.com/jungwoo3490/jungwoo3490/assets/60962533/3708fa83-2572-4467-9fa1-04ff8005a604&quot; type=&quot;video/mp4&quot;&gt;
&lt;/video&gt;
&lt;p&gt;다음과 같이 &quot;즐겨찾기한 레큐북&quot;을 눌렀을 때 0이 아닌 null값이 넘어가는 것을 확인했어요. 1, 2는 잘 넘어가는데 왜 0만 null로 넘어가지?? 의문이 들기 시작했어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;3&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;handleClickTab: () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/mypage/history&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;option:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; } }),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;물론 위와 같이 state 값으로 number 값을 객체로 래핑해서 넘겨준 다음&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;4&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;setSelectedOption&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위와 같이 받을 때 해당 state 객체 프로퍼티에 접근해서 값을 받아오면 잘 받아와졌지만, 왜 state 값으로 단순 number 데이터를 넘겼을 때 다른 값이 아닌 0 값만 null로 넘어갈까에 대한 의문이 생겼고, useNavigate의 문제라고 생각하고 궁금증 해결을 위해 react-router 코드를 직접 뜯어보게 되었어요.&lt;/p&gt;
&lt;p&gt;네비게이터 역할을 하는 함수 구조는 다음과 같았어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;5&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;NavigateFunction&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useCallback&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;To&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; | &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;NavigateOptions&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = {}) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;warning&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;activeRef&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;navigateEffectWarning&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// Short circuit here since if this happens on first render the navigate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// is useless because we haven&amp;#39;t wired up our router subscriber yet&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (!&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;activeRef&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; === &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    } &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, { &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;fromRouteId:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, ...&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;router&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;],&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;별도의 처리 없이 스프레드 연산자로 options 값들을 실어보내고 있는 것을 확인할 수 있었어요.&lt;/p&gt;
&lt;p&gt;options 타입 지정을 확인해보고자 NavigateOptions를 살펴보았어요.&lt;/p&gt;
&lt;p&gt;NavigateOptions은 다음과 같았어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;6&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;NavigateOptions&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;boolean&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;any&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;preventScrollReset&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;boolean&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;relative&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;RelativeRoutingType&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;unstable_flushSync&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;boolean&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;unstable_viewTransition&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;?: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;boolean&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;state는 any 타입이었어요. 그렇다면 실제로 Navigator 측에서 별도의 state 처리를 안 했을 가능성이 높다고 생각했죠.&lt;/p&gt;
&lt;p&gt;이때부터 저는 useNavigate가 아닌 useLocation에 문제가 있을 수도 있겠다는 생각을 하기 시작했어요.&lt;/p&gt;
&lt;p&gt;살펴보던 중, StaticRouter 컴포넌트에서 location을 받아오는 코드를 발견하였고, 드디어 문제를 발견하게 되었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;7&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;hash:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;key:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;default&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;state를 받아올 때 locationProp.state가 falsy한 값이면 null로 처리하도록 되어있었어요.
0 값은 falsy한 값이기 때문에, 저 부분에서 null로 처리가 된 것이었어요.&lt;/p&gt;
&lt;p&gt;이 부분은 분명한 버그라는 생각이 들었고, 다른 값은 잘 처리가 되는데 0만 처리가 안 되는 것은 분명 문제가 있다고 생각했어요.&lt;/p&gt;
&lt;p&gt;이것은 분명히 좋지 못한 사이드 이펙트라는 생각이 들어 이 부분을 개선하고자 했습니다.&lt;/p&gt;
&lt;p&gt;수정 작업은 크게 어렵지 않았어요. 다음과 같이 얕은 비교로 nullish한 값인지 비교해서 nullish한 값일때만 null로 넘기도록 수정해주었어요.&lt;br/&gt;
&lt;code&gt;??&lt;/code&gt; 연산자를 사용하는 방법도 있었지만, 브라우저 호환성을 챙기기 위해 얕은 비교를 사용하게 되었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;8&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;hash:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; != &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ? &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; : &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;key:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;locationProp&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; || &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;default&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;유닛 테스트 코드도 작성해주었어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;9&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk11&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;with an object location prop&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;retains a non-null state when passed explicitly&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;!: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;ReturnType&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;useLocation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;LocationChecker&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;() {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useLocation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;ReactDOMServer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;renderToStaticMarkup&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;StaticRouter&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;{ &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/the/path&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;?the=query&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;          &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/the/path&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;LocationChecker&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Routes&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;StaticRouter&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    )&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;toEqual&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;pathname:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;/the/path&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;search:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;?the=query&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;hash:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;state:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;key:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  })&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;오래 기다린 끝에 Maintainer분께서 approve 및 Merge를 승인해주셨어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 29.447852760736193%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQElEQVR42k2RS0/DMBCEg5DgUhI7D9tx3rXThCZtqAptBeIEB8SlZ/4E//82bNweOHzatWTP7oy98/cZ5bGHsgaNHSGzBrGqkKQ11dLVSORYsAQLLqgKPHB5hfooQyANmGrhixredjrA9kdUZoAu7UVAFghFgURXiEiUyRpBUoDFGkGk/wlKGlpD5i3dNYjTBt7N3S3a8hXT9I5+s0NpHp3ITFa1ELQx0x3ivKNHtTsHUQo/VI686VDbNXRliRbeafyBmh+QgNSWWNL5gnQYhDHZ4ilYlIOTxTAmB0np4NTH5CBRjeu9z/0vWnPC8PSMYXrBeveG4fiF7eEDm93JUdk5jtZtHZCIf7U95znH02/26Me9G+7dP/iknLsJiZonLSH0CiK1xGVDXayQlR1URhkXI+VLn8A1WJg5gis8KvAHDE2gElfOEIkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/bc8bb483066f0e010cf1eac5010c1464/a6d36/image-30.png&quot;
        srcset=&quot;/static/bc8bb483066f0e010cf1eac5010c1464/222b7/image-30.png 163w,
/static/bc8bb483066f0e010cf1eac5010c1464/ff46a/image-30.png 325w,
/static/bc8bb483066f0e010cf1eac5010c1464/a6d36/image-30.png 650w,
/static/bc8bb483066f0e010cf1eac5010c1464/e548f/image-30.png 975w,
/static/bc8bb483066f0e010cf1eac5010c1464/3c492/image-30.png 1300w,
/static/bc8bb483066f0e010cf1eac5010c1464/161ec/image-30.png 1840w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그렇게 저는 react-router의 기여자가 되었습니다 ⭐️&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.00613496932516%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVR42q2TS2+DMBCEuVZ5kEAwBOMnhMZAHm0g7bn//z9NF6q2h6pSK3MYWbK9o2/X40C7O9x5QHcZoKsWXNUo9CNyWUOXNZq2g7YWQipoYyGVhtKW7h2mu9I6CHOEqhrI0iFQZFI1z+DGIeUlGLeT4kwhTiUiJqb1h8ZzkrBHqiUAMk9yjWCbcIj6CUzUWIQJVtsUyw2b1r9oSTXLTfJVE8SpgO3u4OXpX0a/KYhYAd0MRHggwh1tZn6GI6F2PVhRTfjehKOhaXpk8nuGnoYFBBFmpsXKc4ZhNM6QCN9eLridGzyEDGsPw/Vny4eux15W87Q8EipqObfdPI+yy+QUm3hv5snhR2xu9G0sFmvKYeSbw0xA1lfstUO4y2mT+bYsUJ5eYdo7GXLv6LwDZhp2iPzm+20AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/0e441558009e0fa212312799b9c6d074/a6d36/image-31.png&quot;
        srcset=&quot;/static/0e441558009e0fa212312799b9c6d074/222b7/image-31.png 163w,
/static/0e441558009e0fa212312799b9c6d074/ff46a/image-31.png 325w,
/static/0e441558009e0fa212312799b9c6d074/a6d36/image-31.png 650w,
/static/0e441558009e0fa212312799b9c6d074/e548f/image-31.png 975w,
/static/0e441558009e0fa212312799b9c6d074/3c492/image-31.png 1300w,
/static/0e441558009e0fa212312799b9c6d074/7ad71/image-31.png 2338w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;첫 오픈소스 기여였는데, 해외 개발자분들과 소통해야 해서 시차 문제 때문에 소통이 꽤나 힘들었었어요.&lt;br /&gt;
하지만 분명히 좋은 경험이었고, 오픈소스 기여에 대한 두려움이 사라지게 되었어요.&lt;/p&gt;
&lt;p&gt;앞으로도 다른 라이브러리에 많이 기여하여 개발자들의 생태계를 개선해야겠다고 다짐했어요.&lt;/p&gt;
&lt;p&gt;++ 6/25일에 버그 개선한 부분이 6.24.0 버전에 릴리즈되었습니다!!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVR42lWQS2+CQBRG2VbrE2F4DTIOCCKCWoyaPtJNm3TT9P//mdOBuNDFyTd3cW/mfJYvNdmmoaiOeNGKuZAsvBjb5NyN+vdMLJm6S8Zz74HRTNzNop8t11+i8x0q2yJChS9XBLHuj4swwY8UdpAyFinDkc3TjYFhOHEYjBd9djxPXSwvTqmOVy4fXxS7FifUNxTC/F7qkkgVrNYlal2RlXtjtEcXDVGyRqq8z9DQ2Vli4XE9nHg7v/L388vn+zf7+kqVbajzisvhzKlpKfIjaVLgmAocY9XRVXLPxPaxEqloy5rGLNebFw5VS5lWJCIg8UJ0GKMDiTQLvu0ZtUfFe7oO/wEUsIat1BpUTwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;alt text&quot;
        title=&quot;&quot;
        src=&quot;/static/a1d92488fb56fb74db0ff5a12fa71032/a6d36/image-32.png&quot;
        srcset=&quot;/static/a1d92488fb56fb74db0ff5a12fa71032/222b7/image-32.png 163w,
/static/a1d92488fb56fb74db0ff5a12fa71032/ff46a/image-32.png 325w,
/static/a1d92488fb56fb74db0ff5a12fa71032/a6d36/image-32.png 650w,
/static/a1d92488fb56fb74db0ff5a12fa71032/e548f/image-32.png 975w,
/static/a1d92488fb56fb74db0ff5a12fa71032/3c492/image-32.png 1300w,
/static/a1d92488fb56fb74db0ff5a12fa71032/bf6f8/image-32.png 2047w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk17 { color: #808080; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk7 { color: #B5CEA8; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[GraphQL 톺아보기]]></title><description><![CDATA[요즘 개발자들 입에 자주 오르내리고, 채용 공고들을 보면 우대사항에서 심심치 않게 볼 수 있는 기술이 있어요. 바로 GraphQL입니다. GraphQL은 대체 뭘 하는 친구일까요?? GraphQL이란 GraphQL…]]></description><link>https://jungwoo3490.github.io/blog/GraphQL/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/GraphQL/</guid><pubDate>Wed, 24 Apr 2024 09:11:00 GMT</pubDate><content:encoded>&lt;p&gt;요즘 개발자들 입에 자주 오르내리고, 채용 공고들을 보면 우대사항에서 심심치 않게 볼 수 있는 기술이 있어요. 바로 GraphQL입니다.&lt;/p&gt;
&lt;p&gt;GraphQL은 대체 뭘 하는 친구일까요??&lt;/p&gt;
&lt;h2&gt;GraphQL이란&lt;/h2&gt;
&lt;p&gt;GraphQL이란 페이스북에서 개발한 &lt;strong&gt;쿼리 언어&lt;/strong&gt;에요. 그렇다면 쿼리 언어란 무엇일까요??&lt;/p&gt;
&lt;p&gt;Query의 사전적 의미는 &lt;strong&gt;&apos;질의&apos;&lt;/strong&gt; 라는 의미에요.
따라서 Query Language는 질의를 하기 위한 언어, 즉 데이터 요청을 하기 위해 특화된 언어라는 뜻입니다.&lt;/p&gt;
&lt;p&gt;Query Language의 대표적인 예시로 &lt;strong&gt;SQL(Structed Query Language)&lt;/strong&gt; 이 있어요.&lt;br/&gt;
SQL은 데이터베이스에 저장된 데이터를 가져오기 위해 데이터베이스에 질의하는 언어죠.&lt;/p&gt;
&lt;p&gt;GraphQL은 SQL과 같은 쿼리 언어이지만, 언어적 구조 자체가 매우 달라요.&lt;br/&gt;
그 이유는 각자 질의의 목적 자체가 다르기 때문이에요.&lt;/p&gt;
&lt;p&gt;SQL은 데이터베이스에 저장된 데이터들을 효율적으로 가져오는 데 목적을 둔 언어에요.&lt;br/&gt;
이와 반대로 GraphQL은 웹 클라이언트 측에서 서버로부터 데이터를 효율적으로 가져오는 데 목적을 둔 언어에요.&lt;/p&gt;
&lt;p&gt;보통 질의 언어를 질의하는 쪽에서 작성하는데, 그래서 SQL은 주로 백엔드 시스템에서 작성하게 되고 GraphQL는 주로 클라이언트 시스템에서 작성하게 돼요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;GraphQL 등장 배경&lt;/h2&gt;
&lt;p&gt;앞서 말했듯이 GraphQL은 FaceBook에서 개발한 쿼리 언어에요. REST API 방식이 현재까지도 많이 쓰이고 있는데, FaceBook은 GraphQL을 왜 만들었을까요??&lt;/p&gt;
&lt;p&gt;2012년 당시 FaceBook은 Restful한 서버와 FQL(FaceBook의 SQL) 데이터 테이블을 사용하고 있었어요.&lt;br/&gt;
하지만 앱 충돌이 많이 발생했고, 성능도 좋지 못했어요.&lt;/p&gt;
&lt;p&gt;FaceBook은 데이터를 클라이언트로 전송하는 방식을 개선해야 한다는 것을 깨달았고, GraphQL을 개발하기 시작했어요.&lt;/p&gt;
&lt;p&gt;기존 REST 방식은 2가지 큰 단점이 존재했어요.&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Over-Fetching&lt;/strong&gt;: 클라이언트에서 사용하려고 데이터를 요청했는데, 데이터를 너무 많이 받아온 경우에요. 쓸모없는 데이터를 보내 통신을 무겁게 하고 프론트측 데이터에 혼동을 줄 가능성이 있어요.&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Under-Fetching&lt;/strong&gt;: 데이터를 요청하고 나서 원하는 데이터를 완전히 받아오지 못해 추가적인 데이터를 또 요청해야 하는 경우를 의미해요. 하나의 EndPoint로 데이터가 충족되지 않아 API를 두번 호출해야 하는 상황이 되고, 이렇게 되면 사용자에게 느린 서비스를 제공할 수 밖에 없게 돼요.&lt;/p&gt;
&lt;p&gt;GraphQL은 이 2가지 문제를 해결하고자 했어요. GraphQL을 사용하면 정확히 내가 원하는 데이터만 받을 수 있어 Over-Fetching 문제를 해결할 수 있고, 단 하나의 request만으로 필요한 모든 데이터를 받을 수 있어 Under-Fetching 문제를 해결할 수 있어요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;GraphQL 원리&lt;/h2&gt;
&lt;p&gt;서버에서는 클라이언트가 GraphQL 방식으로 요청할 수 있는 데이터의 타입들과 각 타입에 대해 요청할 수 있는 필드들을 정의하여 타입 시스템을 구축하고, 각 타입의 각 필드에 대한 요청을 해석 및 처리하는 로직을 Resolver 함수들로 구현해요.&lt;/p&gt;
&lt;p&gt;이후 클라이언트가 GraphQL 쿼리를 보내면, 서버는 미리 정의해둔 타입 시스템에 따라 해당 쿼리를 검증(Validation)하고, 문제가 없다면 미리 구현해둔 Resolver 함수들을 호출하여 해당 쿼리를 실행(Execution)한 결과를 클라이언트에게 응답해요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/443eb87b-0567-4cb6-a81b-52165fd07ee3/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;이러한 방식을 사용하면 여러번 네트워크 호출을 할 필요 없이, 한 번의 네트워크 호출로 요청을 처리할 수 있게 돼요.&lt;/p&gt;
&lt;h3&gt;🍀 Resolver 함수&lt;/h3&gt;
&lt;p&gt;GraphQL에서는 데이터를 가져오는 구체적인 과정을 직접 구현해야 해요.&lt;/p&gt;
&lt;p&gt;GraphQL 쿼리문 파싱은 대부분의 GraphQL 라이브러리에서 처리를 하지만, GraphQL에서 데이터를 가져오는 구체적인 과정은 Resolver 함수가 담당하고, 이를 직접 구현해야 해요.&lt;/p&gt;
&lt;p&gt;개발자는 Resolver 함수를 직접 구현해야하는 부담은 있지만, 이를 통해서 데이터 source의 종류에 상관없이 구현이 가능하게 돼요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;쿼리 &amp;#x26; 뮤테이션&lt;/h2&gt;
&lt;h3&gt;🍀 필드&lt;/h3&gt;
&lt;p&gt;GraphQL은 객체에 대한 특정 필드를 요청하는 것이 무척 간단해요&lt;/p&gt;
&lt;p&gt;다음은 hero의 이름에 대해 질의하는 쿼리입니다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/2004bfad-8ce1-462b-a211-98852192114f/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;보다시피 쿼리의 요청 형식과 쿼리 결과 형식이 동일한 형태인 것을 확인할 수 있어요. 이렇게 항상 기대한 결과를 얻을 수 있다는 점이 GraphQL의 장점이에요.&lt;/p&gt;
&lt;p&gt;또 GraphQL 쿼리는 연관된 객체와 필드를 탐색 할 수 있으므로 클라이언트는 여러번 요청을 수행하는 대신 한번의 요청으로 많은 데이터를 가져올 수 있다는 장점도 있어요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/21075556-ca1b-4765-945c-a42950d5a041/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3&gt;🍀 인자&lt;/h3&gt;
&lt;p&gt;GraphQL은 다음과 같이 필드에 인자를 전달할 수 있는 기능을 제공해요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 22.085889570552148%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAh0lEQVR42m1P7Q7CIBDb+z+mxkSToUKGcF/Uu+gPpjvSNDlKWxYRQamE3hloDHUMP7+jrqNcIaIY4/8+JvaLEy7rhvM1g5+Ee2kgf7QTfjmtBadbhtSO9mhoqcKiyGzI7K3UYOa9HBp80CB2nQXJA19dPNiQNw822xuqzl/4mB2BiBDao6AZb1rtO5ZjDOtVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;인자 예시 1&quot;
        title=&quot;&quot;
        src=&quot;/static/d213cb27dfc7d6b620dafb54f46d7570/a6d36/image.png&quot;
        srcset=&quot;/static/d213cb27dfc7d6b620dafb54f46d7570/222b7/image.png 163w,
/static/d213cb27dfc7d6b620dafb54f46d7570/ff46a/image.png 325w,
/static/d213cb27dfc7d6b620dafb54f46d7570/a6d36/image.png 650w,
/static/d213cb27dfc7d6b620dafb54f46d7570/e548f/image.png 975w,
/static/d213cb27dfc7d6b620dafb54f46d7570/3c492/image.png 1300w,
/static/d213cb27dfc7d6b620dafb54f46d7570/2a333/image.png 1484w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;REST 시스템에서는 요청에 쿼리 파라미터와 URL 세그먼트같은 단일 인자들만 전달할 수 있었어요. 하지만 GraphQL에서는 위 예제에서 보다시피 모든 필드와 중첩된 객체가 인자를 가질 수 있으므로 기존에 요청을 여러번 보내야 했던 문제를 완벽히 대체할 수 있어요.&lt;/p&gt;
&lt;p&gt;인자로는 다양한 타입을 전달할 수 있어요. GraphQL은 기본적으로 기본 타입을 제공하지만, GraphQL 서버는 데이터를 직렬화 할 수 있는 한 직접 커스텀 타입을 선언할 수도 있습니다.&lt;/p&gt;
&lt;h3&gt;🍀 별칭&lt;/h3&gt;
&lt;p&gt;결과 객체 필드가 ​​쿼리의 필드 이름과 일치하지만 인자는 그렇지 않으므로 다른 인자를 사용하여 같은 필드를 직접 쿼리할 수는 없어요. 그래서 필드의 결과를 원하는 이름으로 바꿀 수 있는 기능을 제공하는데, 이를 별칭이라고 해요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsklEQVR42oWQ6wrCMAyF9/7PqYLo2OzWNs2lx7RzP+YETwmBcvLlMjALQiyImUGiyJ4lKRZSzIlhZqj+hAo4JBT3q9X+11RrPcQgqrg+V0wLITIjhgIK3IGRuJu6HDw+Ai7jgrxkyCtBpwQjwa4ObBPcHDi3KQt3GPmEwY0i8jFuBdNKuE8RkgvMN6li3qgega1I1fBXbo4OalD15ubnOFscqL4yUE+3+A7m7Z69cI8fvjeMBonPZjaUjAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;별칭 예시 1&quot;
        title=&quot;&quot;
        src=&quot;/static/b8003d3378e0ff3195f6be0087d57a24/a6d36/image-1.png&quot;
        srcset=&quot;/static/b8003d3378e0ff3195f6be0087d57a24/222b7/image-1.png 163w,
/static/b8003d3378e0ff3195f6be0087d57a24/ff46a/image-1.png 325w,
/static/b8003d3378e0ff3195f6be0087d57a24/a6d36/image-1.png 650w,
/static/b8003d3378e0ff3195f6be0087d57a24/e548f/image-1.png 975w,
/static/b8003d3378e0ff3195f6be0087d57a24/3c492/image-1.png 1300w,
/static/b8003d3378e0ff3195f6be0087d57a24/0d390/image-1.png 1472w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 예제에서 두 hero 필드에서 다른 인자를 사용하여 충돌이 일어나지만, 서로 다른 이름의 별칭을 지정해서 하나의 요청에서 두 가지 결과를 모두 얻을 수 있어요.&lt;/p&gt;
&lt;h3&gt;🍀 작업 타입&lt;/h3&gt;
&lt;p&gt;위 예시들에서는 query 키워드와 query 이름을 모두 생략한 단축 문법을 사용했어요. 하지만 실제 애플리케이션에서는 코드를 헷갈리지 않게 하기 위해 키워드와 이름을 생략하지 않는 것이 좋아요.&lt;br/&gt;
공식문서에서도 query 키워드와 query 이름을 생략하지 않는 것을 권장해요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoUlEQVR42oVQ7Q6DIBDz/V9zP5ZpdIICHvfRgQvOJS4raQihtPS6MD/h+gk8Okjl5JGXAKvLPuSNQC5ARNBwvm/squDWezymFVCtqjdP2E9qGAaP+7iAfYKmjCt0qoK4ZSw/BO0nFZkV/RwRAsGIYSywLHvYYUhEx4N/qLpYgmMuZmUXl8AlwEpQq7JXvprFFbWMJCQqjRgai+G6wdS+5v0CXXGKeKPgMeoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;작업 타입 예시 1&quot;
        title=&quot;&quot;
        src=&quot;/static/f6db2f823f77225353560f417ccc5847/a6d36/image-2.png&quot;
        srcset=&quot;/static/f6db2f823f77225353560f417ccc5847/222b7/image-2.png 163w,
/static/f6db2f823f77225353560f417ccc5847/ff46a/image-2.png 325w,
/static/f6db2f823f77225353560f417ccc5847/a6d36/image-2.png 650w,
/static/f6db2f823f77225353560f417ccc5847/e548f/image-2.png 975w,
/static/f6db2f823f77225353560f417ccc5847/3c492/image-2.png 1300w,
/static/f6db2f823f77225353560f417ccc5847/a2792/image-2.png 1462w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 예제에서 &apos;query&apos; 부분을 &lt;strong&gt;작업 타입&lt;/strong&gt; 이라고 하고, &apos;HeroNameAndFriends&apos; 부분을 &lt;strong&gt;작업 이름&lt;/strong&gt; 이라고 합니다.&lt;/p&gt;
&lt;p&gt;작업 타입에는 &lt;code&gt;query&lt;/code&gt;, &lt;code&gt;mutation&lt;/code&gt;, &lt;code&gt;subscription&lt;/code&gt;이 있어요.&lt;/p&gt;
&lt;p&gt;작업 이름은 명시적으로 적어주어야 서버의 로깅 및 디버깅에 용이해요.&lt;/p&gt;
&lt;p&gt;⭐️ &lt;strong&gt;query&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJElEQVR42m2QT07CYBTEewyOQCIbrgBLVhyIo2ACCSSyQ9TuhRDDThZaKCBikWKBFgul/+jPr18MceEkk8zivXkzT0FgMBjQ6XRSSZIk/EUSn4nev3GbYw43Y6KFC5sNyccC1ibm0qDRbFKtVtE0DSVdqlQqFItFaRDHMY7j4HnexfzQ0gk1m1B3OLYmhJaFORwKY4unXo+rXI5MJkO9XkfRdZ1CoUA2m0VVVWzbZiiGZ7MZ08mUO/WeU0PHf7YIXnfsr1/4tL7Q3uaY2y2P3a4Mk8/nabfbKP1+n3K5TKlUolaryURpQt/3JVfLFfF0j3c75/SwIBQ6PB5Zj0YE4rhhGDJIykvltGYURfyL35fuzR3fghLnM+InEATEQruuK5n6/ADIZl27W6LZvwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;query 작업타입&quot;
        title=&quot;&quot;
        src=&quot;/static/003fd5d348c10d41df3cd70813a8bf6d/a6d36/image-3.png&quot;
        srcset=&quot;/static/003fd5d348c10d41df3cd70813a8bf6d/222b7/image-3.png 163w,
/static/003fd5d348c10d41df3cd70813a8bf6d/ff46a/image-3.png 325w,
/static/003fd5d348c10d41df3cd70813a8bf6d/a6d36/image-3.png 650w,
/static/003fd5d348c10d41df3cd70813a8bf6d/e548f/image-3.png 975w,
/static/003fd5d348c10d41df3cd70813a8bf6d/3c492/image-3.png 1300w,
/static/003fd5d348c10d41df3cd70813a8bf6d/c6f3b/image-3.png 2950w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;query는 &lt;strong&gt;읽기 전용&lt;/strong&gt; 으로 데이터를 가져오기 위한 작업타입이에요. 데이터의 변화 없이 단순 조회가 필요할 때 사용해요.&lt;/p&gt;
&lt;p&gt;⭐️ &lt;strong&gt;mutation&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVR42m2QS07CYBRGuww2QMICWACBDTBjOeyDiSHpAHVCxGpgQoIjhqgk0kIlCkjBWvuAvnv8AaMx8Utuch+5j3MlhIbDIe12++CSZRl/FGdEuo0rT/AuNOJnB3yfzHUhDFktlzSbTRqNBqqqIh166vU6lUrl1B/HmKaJ67g/w71zjUj7JFYtdpczIsfhTZ3AfsfdYEChUCCXy9FqtZA0TaNUKpHP51EUBcuyGI1G6DOdqahd3yj48pTgfks4NrHPxqyMNU+6jrF9p9/vUy6XKRaLdDodpANurVajWq0iy/LxItu2CYKAIAzYrA0SgelfzQluX4jnLtF+j/H4QCSwXxcLut0uvV7vFzlJkiPqv/p+qb3+wN5YpyAVSbGMNBVuhud5R0tF/AU5wV5h8qXBBAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;mutation 작업타입&quot;
        title=&quot;&quot;
        src=&quot;/static/87e7dc4190b6b0b1f8657f34fb64d520/a6d36/image-4.png&quot;
        srcset=&quot;/static/87e7dc4190b6b0b1f8657f34fb64d520/222b7/image-4.png 163w,
/static/87e7dc4190b6b0b1f8657f34fb64d520/ff46a/image-4.png 325w,
/static/87e7dc4190b6b0b1f8657f34fb64d520/a6d36/image-4.png 650w,
/static/87e7dc4190b6b0b1f8657f34fb64d520/e548f/image-4.png 975w,
/static/87e7dc4190b6b0b1f8657f34fb64d520/3c492/image-4.png 1300w,
/static/87e7dc4190b6b0b1f8657f34fb64d520/30c0b/image-4.png 2956w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;mutation은 &lt;strong&gt;데이터를 변경&lt;/strong&gt; 후 가져오기 위한 작업타입이에요. 요청을 통해 데이터를 변화시켜야 할 경우 사용해요.&lt;/p&gt;
&lt;p&gt;⭐️ &lt;strong&gt;subscription&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABQElEQVR42kWQwU7CUBBF+Qz9APkDtixYsGfDx/Ab7iSaIAmJIcFIYgCLWwi6QU0jLZU2kYaqlZa2Wmixx9cudJKbuXmZuXlncogaj8d0u93UkiTJX09dEv8QLTb4jRlBWyNeuBAEJL4P4TdLw+C82aRer6NpGrl0uVarUS6Xs6A4jrFtO1O03xNuI4KLObHmEs0cvtrCuw7WfJ4F3w4GHOXzHB4c0Ol0yCmKQrFYJC8ee70ejuOg6zoP0ymX1zcYby6bU5mdbLN7tPEazyytFTNVxbQspOGQUqlEoVBgKHxuNBpRrVapVCq0Wi08zxOBBneTCccnZ6w+PELVIbwy2A5eifQNpmmiKiovAlGWZSRJot/v/yPvBVqKmpYvbrNer8XSkvvpE35Edkt39Yn37mQzrutiid+lCsNQkAeZ0pxfJWlZWtylyOsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;subscription 작업타입&quot;
        title=&quot;&quot;
        src=&quot;/static/fbc1c8eef8a8fe73d6ab64427684e967/a6d36/image-5.png&quot;
        srcset=&quot;/static/fbc1c8eef8a8fe73d6ab64427684e967/222b7/image-5.png 163w,
/static/fbc1c8eef8a8fe73d6ab64427684e967/ff46a/image-5.png 325w,
/static/fbc1c8eef8a8fe73d6ab64427684e967/a6d36/image-5.png 650w,
/static/fbc1c8eef8a8fe73d6ab64427684e967/e548f/image-5.png 975w,
/static/fbc1c8eef8a8fe73d6ab64427684e967/3c492/image-5.png 1300w,
/static/fbc1c8eef8a8fe73d6ab64427684e967/006be/image-5.png 2959w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;subscription는 &lt;strong&gt;실시간으로 변경된 데이터&lt;/strong&gt; 를 가져오기 위한 작업타입이에요. 웹 소켓을 열어두고 데이터 업데이트 시 알려주는 방식으로 구현되어 있어요.&lt;/p&gt;
&lt;h3&gt;🍀 변수&lt;/h3&gt;
&lt;p&gt;위 예제들에서는 모든 인자를 쿼리 문자열 안에 작성했어요. 하지만 대부분의 응용프로그램에서 필드에 대한 인자는 동적인 경우가 많아요.&lt;/p&gt;
&lt;p&gt;클라이언트는 쿼리 문자열을 런타임에 동적으로 조작하고 GraphQL의 특정한 포맷으로 직렬화해야하기 때문에 동적 인자를 쿼리 문자열에 직접 전달하는 것은 좋은 방법이 아니에요.&lt;/p&gt;
&lt;p&gt;GraphQL은 동적 값을 쿼리에서 없애고, 이를 별도로 전달하는 방법을 제공한다. 이러한 값을 &lt;strong&gt;변수&lt;/strong&gt; 라고 해요.&lt;/p&gt;
&lt;p&gt;⭐️ &lt;strong&gt;변수 사용법&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1. 쿼리안의 정적 값을 &lt;code&gt;$variableName&lt;/code&gt; 으로 변경&lt;br/&gt;
2. &lt;code&gt;$variableName&lt;/code&gt;을 쿼리에서 받는 변수로 선언&lt;br/&gt;
3. 별도의 전송규약 변수에 &lt;code&gt;variableName: value&lt;/code&gt; 전달&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 36.19631901840491%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA80lEQVR42oVR7W7DIAzM+7/lFGlr2jQrJGDANjdDl6ytps3SiR8c92GGEgLidUH5+EQaZ8Tpgm06Y3YTfLyB6YpCM1gEmgqqKGqt6FMf8D2DquD94nEaHZIj+G2BXxfkkqFqj+2+VulkWlacjVuKCSeGEfA6g7ERzPnNiPoLYZ891TivOBnYR2gxM60dhyAzo+Go8Y9gtnS3kCFsK7CTrZV4+hFs8aXtx3bDwn1Xu8kj9vSN76IJZYasqYs+Vc45gVK02gEpEnKg/ugVzXQXpHIPUE20Znn+lOa+kceaHNQISuXPymxVW+WWUC2hONtlloP3Bc58Jj/6Z3djAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;변수 예시&quot;
        title=&quot;&quot;
        src=&quot;/static/3cc33b83bb30fc9c755b24a56e6871b1/a6d36/image-6.png&quot;
        srcset=&quot;/static/3cc33b83bb30fc9c755b24a56e6871b1/222b7/image-6.png 163w,
/static/3cc33b83bb30fc9c755b24a56e6871b1/ff46a/image-6.png 325w,
/static/3cc33b83bb30fc9c755b24a56e6871b1/a6d36/image-6.png 650w,
/static/3cc33b83bb30fc9c755b24a56e6871b1/e548f/image-6.png 975w,
/static/3cc33b83bb30fc9c755b24a56e6871b1/3c492/image-6.png 1300w,
/static/3cc33b83bb30fc9c755b24a56e6871b1/f2331/image-6.png 1427w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;스키마 &amp;#x26; 타입&lt;/h2&gt;
&lt;h3&gt;🍀 객체타입 &amp;#x26; 필드&lt;/h3&gt;
&lt;p&gt;GraphQL 스키마의 가장 기본적인 구성 요소는 객체 타입이에요. 객체 타입은 서비스에서 가져올 수 있는 객체의 종류와 그 객체의 필드를 나타내요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 405px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 39.263803680981596%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABW0lEQVR42nWS227iQAyGef/H6WWvlu1qUZceQbSQ3Z4INANJYBomk2Ry+OpELVK0rSXbo7H9j/17BoVz1EVBXYp3BdQ11lrSNKUqS5zEnOTkWdb5Uu6qqqJpGr6SgZMEu/aJRkPi4SnOf2Luefwc/mAymXIzmXFxec10esf5n0tslqOU6oC/BCykA3mOLI4IVgpf7VmFCYnJMMkWvZmR7Ncc9kuS+AFrdrQ1TVN3dYjvzj1AEVfV/FUJv+8Dxp7ikAoN+QarznCHJ3I9Rz+fEPpXH6X9kT8pOALWAvgQaO6XMY/BG7OXmGVoWLymLNYJNi/J8oLg8Rc2HGN3Hml4S7odEy/P2Gy3HffHkSsBvBOwkXTorffM/R3BzvCstFBwwEiycyWxWmCjKzL9jzSeYkXfNjdorTteB62JoghjTK/17+S7eG/k9ju0HXYci2m17jxH7RUeF/L/Ut4BHKRnICY/NkgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;객체타입 예시&quot;
        title=&quot;&quot;
        src=&quot;/static/c8031ed77a27f837d1788efa3b8ca0f0/1d180/image-7.png&quot;
        srcset=&quot;/static/c8031ed77a27f837d1788efa3b8ca0f0/222b7/image-7.png 163w,
/static/c8031ed77a27f837d1788efa3b8ca0f0/ff46a/image-7.png 325w,
/static/c8031ed77a27f837d1788efa3b8ca0f0/1d180/image-7.png 405w&quot;
        sizes=&quot;(max-width: 405px) 100vw, 405px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;✽ &lt;code&gt;Character&lt;/code&gt; 부분은 GraphQL의 객체 타입을 의미해요. 객체 타입은 필드를 가지고 있는 타입을 의미해요. 스키마 대부분의 타입은 객체 타입이에요.&lt;/p&gt;
&lt;p&gt;✽ &lt;code&gt;name&lt;/code&gt;과 &lt;code&gt;appearsIn&lt;/code&gt; 부분은 &lt;code&gt;Character&lt;/code&gt; 타입의 필드예요. 즉, &lt;code&gt;name&lt;/code&gt;과 &lt;code&gt;appearsIn&lt;/code&gt;은 GraphQL 쿼리의 &lt;code&gt;Character&lt;/code&gt; 타입 어디에서나 사용할 수 있는 필드입니다.&lt;/p&gt;
&lt;p&gt;✽ &lt;code&gt;String&lt;/code&gt;은 내장된 스칼라 타입 중 하나예요. 스칼라 타입이란, 하위 필드가 존재하지 않는 타입으로, 구체적인 데이터를 나타내는 타입이에요. GraphQL의 객체 타입은 이름과 필드를 가지지만, 특정 시점에서 모든 필드들은 구체적인 데이터로 해석되어야 해요. 즉, 쿼리의 끝을 나타내는 부분이 필요하고, 이것이 스칼라 타입의 역할입니다.&lt;/p&gt;
&lt;p&gt;✽ &lt;code&gt;String!&lt;/code&gt;과 같이 필드 뒤에 !가 붙으면 해당 필드가 non-nullable임을 의미해요. non-nullable로 필드를 지정하면, 이 필드를 쿼리할 때 GraphQL 서비스가 항상 값을 반환하는 것을 보장해요.&lt;/p&gt;
&lt;p&gt;✽ &lt;code&gt;[Episode]!&lt;/code&gt; 처럼 &lt;a href=&quot;%EB%8C%80%EA%B4%84%ED%98%B8&quot;&gt;&lt;/a&gt;로 감싸져 있으면 객체의 배열을 의미해요. 또 뒤에 !가 붙었기 때문에 non-nullable한 필드예요. 따라서 &lt;code&gt;appearIn&lt;/code&gt; 필드를 쿼리할 때 항상 0개 이상의 아이템을 가진 배열을 보장하게 돼요.&lt;/p&gt;
&lt;h3&gt;🍀 인자&lt;/h3&gt;
&lt;p&gt;GraphQL 객체 타입의 모든 필드는 0개 이상의 인수를 가질 수 있어요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.22085889570552%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3ElEQVR42p2QwU7DMBBE8/8fh4SAckApbd3UbmI7cdLYcRP8sAKCihsdaWVpd/12NMVVHvGu46RqrG2pqgpjDCEEUkr/rkJtXml1Bu2fqMSWc21oGk2MEUh/6ku3gO/Oz7w4tp6DHlmmmjjsSMuFNFvm6LlHhah7Ht7OnGygMwesEWj5jO8ly3VgnlquvmaJjo/Zr86llCil6DqXDUzrfI5ddrxQ2CFQSse7ckjt2NcjjYsZNuLNhlE/ru/kyvyxwfUD27JECJHBKh8JTP0u77ys8OI3hzWcm0zu0ycGDtH8ZvwwgAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;객체타입 인자&quot;
        title=&quot;&quot;
        src=&quot;/static/41c5b22d737fa4ef02747faf65decc48/a6d36/image-9.png&quot;
        srcset=&quot;/static/41c5b22d737fa4ef02747faf65decc48/222b7/image-9.png 163w,
/static/41c5b22d737fa4ef02747faf65decc48/ff46a/image-9.png 325w,
/static/41c5b22d737fa4ef02747faf65decc48/a6d36/image-9.png 650w,
/static/41c5b22d737fa4ef02747faf65decc48/ebf47/image-9.png 688w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;위 예제에서 &lt;code&gt;length&lt;/code&gt; 필드가 그 예시입니다. 모든 인수에는 이름이 존재해요. 다른 언어의 함수처럼 인자 전달 순서대로 인자를 인식하는 것이 아니라 GraphQL의 모든 인자는 특별한 이름으로 전달되고 인식해요. 위 예제에서 &lt;code&gt;length&lt;/code&gt; 필드는 하나의 인자 unit을 가지게 돼요.&lt;/p&gt;
&lt;p&gt;인자는 필수거나 옵셔널일 수 있어요. 인자가 옵셔널인 경우 기본값을 정의할 수 있어요.&lt;br/&gt;
위 예제에서 unit 인자가 전달되지 않으면 기본적으로 METER로 설정돼요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;인트로스펙션&lt;/h2&gt;
&lt;p&gt;기존 서버-클라이언트 협업 방식에서는 API 명세서를 주고받는 절차가 반드시 필요했어요. 하지만 명세서 자체가 관리 대상이 되고, 프로젝트 관리 측면에서 관리해야 할 대상의 증가는 작업의 복잡성 및 효율성을 저해시킬 수 있죠. API 명세서는 때때로 관리가 제대로 되지 않거나, 공유가 되지 않아 문제가 발생하는 경우도 적지 않았어요.&lt;/p&gt;
&lt;p&gt;이러한 REST API 명세서 공유와 같은 문제를 해결하는 것이 GraphQL의 인트로스펙션 기능이에요. GraphQL의 인트로스펙션은 서버 자체에서 현재 서버에 정의된 스키마의 실시간 정보를 공유를 할 수 있게 하는 기능이에요. 이 스키마 정보만 알고 있으면 클라이언트 사이드에서는 따로 명세서를 요청 할 필요가 없게 되고, 스키마에 맞춰 쿼리문을 작성하면 됩니다.&lt;/p&gt;
&lt;p&gt;이러한 인트로스펙션에 사용하는 쿼리가 별도로 존재해요. 일반적인 GraphQL 쿼리문을 작성하듯이 작성하면 돼요.
다만 실제로는 굳이 스키마 인트로스펙션을 위해 따로 쿼리문을 작성할 필요가 없어요. 대부분의 서버용 GraphQL 라이브러리에서 쿼리용 IDE를 제공하기 때문이에요.&lt;/p&gt;
&lt;p&gt;다음은 apollo server라는 서버용 GraphQL 라이브러리에 포함 되어있는 웹 IDE 화면입니다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.25766871165644%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4UlEQVR42oWSTU8TYRDHe+DAgSCFQi193W23L7vdbrstS+kLEN5MTIwe9crBxItnD16NSkDLYvDgZ+BuEzkpFAyJL59AY0SkNRFa2u4+3Wec3TYo4eAk/8zMJvvLf2Yem8hxbDYtrs/mZ9XpuTl1bmFRTcqKyobCashSyKqjsZgqSZIqiaKVRSmpCoKAvbQuYZ1ISKVgMBiycRy3kJlQIJ2dATlbpOnJPAhSBoJREdhIHLNkaczNgisQgQAbAT8TxpoHv9kzYcpwPLgDYRgedS3ZuFhsIZUtGmxqmjCJgu5keOKNpokrLJNRJk7GQjK5Gk6R+w8ektWNV+RJ6SVZKW2Sx2svyNPnm2RlraQ/29gkj1bVzvLde0u2QRezOBqSwcmlYDySojdvL0MwWQAPPwnj/BS4IgqMxxXY+/wBzDAMw8pAKTY6Fh1qtrquw/b2dhfoZEUIxdPA8RP02o07wEgFCMjzwE7MgzdegOSt63Dw5ROQlg7NZhNarRacnNah1WxBhxCKAa12G8rlcs8hE0eHCRjx8nTIK4BbmAIPypvIYc5CMD8DlY97aKMFbfzRdNNonEHzrI4GNcuhpml/HToCcRj2o3w8vRpOIyQHbj6LY2fBHUUhdKfyFsfU0JFuTWw6+n3aANJu9ID/jDziF8CUCXSGUpY7C4ggd2wSPOh0dx+B7V+g1atdII7dbOug6aZDenGH/wdOwc5+xRpZq9eAdjQE6WDuzjzPpaP0gBSBBgIpAikCMWcpAqlHzNHd9+8odHSqn51RorWp0QWZMs9OzR2eHwVBuEMB7KZDTsbL5rpHieNx+O5xKgd7vWfT6b0aCr246PDKmG/ezSWokxEMhy/aGfZGjBFf1JLDjxl7BxszXr8pGye1mnH0/atx/OObcfzzyKhWq6Y6Nfx+eHhobG1tLdowBu12e35gaKjY3z9Q7OvrK9pslxUTxaKSyxVlpSdZQcnnymQyOUVRBv8AKm4r7ltIvPsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;apollo server graphql ide&quot;
        title=&quot;&quot;
        src=&quot;/static/a5ed2252af60faf39318743d654b6932/a6d36/image-10.png&quot;
        srcset=&quot;/static/a5ed2252af60faf39318743d654b6932/222b7/image-10.png 163w,
/static/a5ed2252af60faf39318743d654b6932/ff46a/image-10.png 325w,
/static/a5ed2252af60faf39318743d654b6932/a6d36/image-10.png 650w,
/static/a5ed2252af60faf39318743d654b6932/e548f/image-10.png 975w,
/static/a5ed2252af60faf39318743d654b6932/3c492/image-10.png 1300w,
/static/a5ed2252af60faf39318743d654b6932/d8ced/image-10.png 2652w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;개발자는 인트로스펙션을 활용하여, 직접 쿼리 및 뮤테이션, 필드 스키마를 확인할 수 있어요.&lt;br/&gt;
상용환경에서는 보안상의 이슈로 이러한 스키마의 공개는 신중해야 해요. 대부분의 라이브러리는 해당 기능을 끄고 켜는 옵션이 존재해요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;GraphQL을 사용하는 기업&lt;/h2&gt;
&lt;p&gt;GraphQL 홈페이지 하단을 보면 GraphQL을 사용하는 기업 목록을 볼 수 있어요.&lt;br/&gt;
유명한 기업들은 다음과 같다.&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;FaceBook&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Github&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Pinterest&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;• &lt;strong&gt;Twitter&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;이 중, Github는 API v3에서 REST 방식을 사용하다가 v4에서는 GraphQL로 갈아탔는데, 아래 링크의 글을 읽어보면 GraphQL의 장점을 확인할 수 있어요.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/graphql&quot;&gt;https://docs.github.com/ko/graphql&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;또, Github Explorer에서 GraphQL을 사용해볼 수 있도록 지원해주는데, 로그인 이후 본인의 계정 정보를 조회해볼 수 있어요.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.github.com/ko/graphql/overview/explorer&quot;&gt;https://docs.github.com/ko/graphql/overview/explorer&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVR42oWRyU9TURSHuwCjIND2dXhAB6YACRFdaOLCGOPCaOI/4MKFGmWhYIwyKEKpKEPQIFBwqwsExIa9xrhwCOpCSk0E4kK3gmIUKn1DP+99hYiEyEl+Offcd+6X837H5isqx5UfxO4qwOn143D7cKlBFG8QpyeAw+NfVcCq7W6/JVnLHk9BiZUVb5E4F2PL95fiL64g16myLcvOrj17efniGa9fPWfq/SRzs9PMzsQszXyc4tNcXNzFiMffEpua5EP8HdOxN3z5PEN9YwM2RQ2IiQIWcHuOi6rq3TwaizA83MvIwz5GR/sZGx1gZKSfYaHx6CATE/eIihx9LBQdYnw8wtMnDzhbcxKbr7icsspqchxeIQ9ZeSqHjp3gZs8QrR29tHX20dZxl1BXH+3Xewi33CbcPUB7d0RokBtdEcKdA9yJ3Gf/waPYCoPlBEoqLQ8d7gIysxUu1ocx0fm29JXFxHd+JBaZT8yzvLAAS0lWjBS6bgAGqVQKwzCRcabmArZgWRWB0gqxEB+K6hNAF7WXWzF0nZ+/ljFMQzyQ0knqGklNQ9N0AdStHlN800SWcfqcAEr/HO5Cdto95CkqGVkKdVdarYbfK+nGtZDTpExzwx2YpvEXKEFS0sM8JZ+MHU5rQhnmhsdr0P8C08vwrgJVMtdNaAif5C+tl7FJrQkb0sDzmwCFh5ea2lcnTLFVyA4JTS+l9l9grlC2XeXA4eM0NYeob2qh8VpoSzVcbaE5dIt9R07xB7MfTlKKoLR9AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;github graphql&quot;
        title=&quot;&quot;
        src=&quot;/static/1f8380548566d2e47b9c3b4e8f2ca502/a6d36/image-11.png&quot;
        srcset=&quot;/static/1f8380548566d2e47b9c3b4e8f2ca502/222b7/image-11.png 163w,
/static/1f8380548566d2e47b9c3b4e8f2ca502/ff46a/image-11.png 325w,
/static/1f8380548566d2e47b9c3b4e8f2ca502/a6d36/image-11.png 650w,
/static/1f8380548566d2e47b9c3b4e8f2ca502/e548f/image-11.png 975w,
/static/1f8380548566d2e47b9c3b4e8f2ca502/3c492/image-11.png 1300w,
/static/1f8380548566d2e47b9c3b4e8f2ca502/09d8d/image-11.png 3012w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;다음과 같이 GraphQL 쿼리를 활용해서 로그인된 유저 닉네임을 조회하였고, 로그인한 저의 닉네임이 잘 표시되는 것을 확인할 수 있었어요.&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[모달 닫기 버튼 클릭 안 되는 이슈 트러블슈팅(feat. 이벤트 버블링)]]></title><description><![CDATA[React로 개발 중인 프로젝트 진행 도중 문제가 발생했어요. 문제는 다음과 같은 포스트잇 모달에서 발생했어요.
뒷배경으로 보이는 작은 포스트잇을 클릭하면 다음과 같이 해당 포스트잇에 대한 정보를 담은 포스트잇 모달을 오버레이시켰어요. Modal…]]></description><link>https://jungwoo3490.github.io/blog/js-event-bubbling/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/js-event-bubbling/</guid><pubDate>Thu, 18 Jan 2024 21:09:00 GMT</pubDate><content:encoded>&lt;p&gt;React로 개발 중인 프로젝트 진행 도중 문제가 발생했어요.&lt;/p&gt;
&lt;p&gt;문제는 다음과 같은 포스트잇 모달에서 발생했어요.&lt;br /&gt;
뒷배경으로 보이는 작은 포스트잇을 클릭하면 다음과 같이 해당 포스트잇에 대한 정보를 담은 포스트잇 모달을 오버레이시켰어요.&lt;/p&gt;
&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/3dfd2790-49ea-4ab9-8e88-3c1cd98cbcc3/image.png&quot; width=&quot;60%&quot;&gt;
&lt;br /&gt;
&lt;p&gt;Modal은 React의 CreatePortal을 사용하여 구현했어요.&lt;/p&gt;
&lt;p&gt;작은 포스트잇을 클릭하면 Modal이 팝업되는 것은 잘 동작하는데, Modal이 팝업되었을 때 X 버튼을 눌러도 Modal이 닫히지 않는 버그가 발생했어요.&lt;/p&gt;
&lt;p&gt;모달 팝업 기능을 구현한 코드는 다음과 같아요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;0&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// SmallLecueNote.tsx&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;setModalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getClickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteList&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;note&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;note&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteId&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; === &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteId&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleClickSmallLecueNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;clickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getClickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;clickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setModalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// 중략...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;amp;&amp;amp; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;LecueNoteModal&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;={&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getClickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;={() =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setModalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  )&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;뒷배경에 있는 작은 포스트잇이 SmallLecueNote 컴포넌트이고, 각 포스트잇마다 Modal의 팝업 여부를 결정하는 modalShow state를 관리해요.&lt;/p&gt;
&lt;p&gt;포스트잇을 클릭하면 handleClickSmallLecueNote 이벤트 핸들러가 동작해요. 포스트잇을 클릭하면 getClickedNote를 통해 전체 noteList에서 현재 클릭된 노트가 무엇인지 찾아서 그 객체를 가져와요. 잘 가져왔으면 &lt;code&gt;setModalShow(true)&lt;/code&gt;로 Modal을 팝업시키도록 했어요.&lt;/p&gt;
&lt;p&gt;Modal의 prop으로 closeModal 함수를 내려주는데, 이 함수는 &lt;code&gt;setModalShow(false)&lt;/code&gt;로 모달을 닫아버려요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;1&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// LecueNoteModal.tsx&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;LecueNoteModalProps&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;NoteType&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; | &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;undefined&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;void&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;LecueNoteModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;({ &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; }: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;LecueNoteModalProps&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleCloseButtonClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;createPortal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;BlurryContainer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;CloseButton&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;button&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;={&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handleCloseButtonClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;}&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;IcX&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; /&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;CloseButton&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;BlurryContainer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalContainer&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  )&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;LecueNoteModal&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;LecueNoteModal에서 CloseButton이 눌렸을 때 onClick 이벤트 핸들러로 handleCloseButtonClick 함수를 달아주었어요.
handleCloseButtonClick 함수는 prop으로 내려온 closeModal을 실행, 즉 모달을 닫아버려요.&lt;/p&gt;
&lt;p&gt;즉, X 버튼을 누르면 모달이 닫혀야 정상인데, 이상하게 모달이 닫히지 않았어요.&lt;/p&gt;
&lt;p&gt;결국 modalShow가 modal의 팝업 여부를 결정하기 때문에, modalShow 상태값을 추적해보았어요.&lt;br/&gt;
추적 결과, X 버튼을 누르더라도 modalShow값이 true로 유지되는것을 확인했어요.&lt;/p&gt;
&lt;p&gt;현재 내 코드에서 modalShow를 변경시키는 함수는 부모 컴포넌트인 SmallLecueNote에 있는 handleClickSmallLecueNote 핸들러와 자식 컴포넌트인 LecueNoteModal에 있는 handleCloseButtonClick 핸들러, 단 2개뿐이었어요.&lt;/p&gt;
&lt;p&gt;두 함수 내부에 console을 찍어서 함수 호출 여부 및 순서를 확인해보았어요. 그 결과 신기한 현상이 발생했어요.&lt;br/&gt;
X 버튼을 눌렀는데, 자식 컴포넌트 핸들러가 실행된 즉시 부모 컴포넌트 핸들러가 실행되었어요.&lt;/p&gt;
&lt;p&gt;대체 뭐가 문제일까... 굉장히 많은 고민을 해보았어요.&lt;br/&gt;
고민을 하다가 문득 세미나 때 들었던 이벤트 전파에 대해서 떠올렸고, 상위 컴포넌트로 이벤트가 전파되는 이벤트 버블링 때문일수도 있겠다는 생각이 들었어요.&lt;/p&gt;
&lt;h2&gt;Event Bubbling&lt;/h2&gt;
&lt;p&gt;이벤트 버블링은 특정 화면 요소에서 이벤트가 발생했을 때 해당 이벤트가 더 상위의 화면 요소들로 전달되어 가는 특성을 의미해요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/f08480aa-c391-4bae-9461-be08d5ee9fe1/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;예를 들어 다음 코드를 생각해볼게요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;html&quot; data-index=&quot;2&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;&amp;lt;!-- index.html --&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;two&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;three&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;js&quot; data-index=&quot;3&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// index.js&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;divs&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;querySelectorAll&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk12&quot;&gt;divs&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;click&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;logEvent&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;})&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;logEvent&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;currentTarget&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;각 div를 클릭하면 클릭된 div의 className을 console에 출력하는 간단한 코드예요.&lt;/p&gt;
&lt;p&gt;여기서 class가 three인 div를 누르면 어떻게 될까요?&lt;br/&gt;
console에 three만 찍힐 것이라고 예상을 할 수도 있겠지만, console을 확인해보면 결과는 다음과 같아요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/2e92cac3-725f-47d6-a59d-4bbef870892d/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;왜 이런 일이 일어날까요?&lt;/p&gt;
&lt;p&gt;브라우저는 기본적으로 특정 화면 요소에서 이벤트가 전파되었을 떄 그 이벤트를 최상위에 있는 화면 요소까지 전파시켜요.&lt;/p&gt;
&lt;p&gt;위 코드에서 가장 하위 level에 있는 class three div를 클릭하면 이 클릭 이벤트가 상위로 전파되어 class two div의 click 이벤트 핸들러가 동작하고, 클릭 이벤트가 또 상위로 전파되어 class one div click 이벤트 핸들러가 동작해요. 그래서 three -&gt; two -&gt; one 순서대로 console에 찍히게 되는 것이에요.&lt;/p&gt;
&lt;p&gt;다시 제가 작성했던 코드로 돌아가볼게요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;4&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// SmallLecueNote.tsx&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;S.SmallLecueNoteWrapper&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderType&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderType&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteTextColor&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteTextColor&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteBackground&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteBackground&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handleClickSmallLecueNote&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;amp;&amp;amp; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;LecueNoteModal&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getClickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;() &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setModalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    )&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;S.SmallLecueNoteWrapper&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이벤트 버블링의 원리를 제가 겪은 이슈에 적용해보면, 문제가 발생했던 이유를 쉽게 파악할 수 있어요.
현재 SmallLecueNoteWrapper의 onClick 이벤트 핸들러로 Modal이 팝업되는 함수가 바인딩되어있고, 자식 컴포넌트인 LecueNoteModal 컴포넌트는 onClick 이벤트 핸들러로 Modal이 사라지는 함수가 바인딩되어있어요.&lt;/p&gt;
&lt;p&gt;자식 컴포넌트 LecueNoteModal을 클릭하면, onClick 이벤트가 발생하여 Modal이 사라지는 함수가 동작해요. 그 후 클릭 이벤트가 상위 컴포넌트인 SmallLecueNoteWrapper로 전파되어 Modal이 팝업되는 함수가 동작해요.&lt;/p&gt;
&lt;p&gt;그래서 결국 Modal이 사라지지 않고 팝업된 상태로 남아있는 것이었어요.&lt;/p&gt;
&lt;h2&gt;이벤트 버블링 해결하기&lt;/h2&gt;
&lt;p&gt;처음에는 &lt;code&gt;event.stopPropagation()&lt;/code&gt;으로 Modal 닫기 버튼 클릭 이벤트 전파를 강제로 막았어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;ts&quot; data-index=&quot;5&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;handleCloseButtonClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;MouseEvent&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;HTMLButtonElement&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;&amp;gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;stopPropagation&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;하지만 &quot;강제&quot;로 막는 것은 의도치 않은 사이드 이펙트를 야기할 위험성이 존재한다고 생각했어요. 원인이 이벤트 버블링 때문인 것을 알았으니, 이제 구조 변경을 통해 이벤트 버블링을 해결하고자 했어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;tsx&quot; data-index=&quot;6&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// SmallLecueNote.tsx&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;React.Fragment&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;modalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &amp;amp;&amp;amp; (&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;LecueNoteModal&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;selectedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getClickedNote&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;closeModal&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;() &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;setModalShow&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  )&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;S.SmallLecueNoteWrapper&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderType&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderType&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteTextColor&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;noteTextColor&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;handleClickSmallLecueNote&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    ...&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;S.SmallLecueNoteWrapper&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;React.Fragment&lt;/span&gt;&lt;span class=&quot;mtk17&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;다음과 같이 구조를 변경했어요. Modal은 전체 화면을 기준으로 위치를 잡기 때문에 SmallLecueNoteWrapper와의 상대 위치값을 고려할 필요가 없었고, 따라서 Click 이벤트 핸들러가 등록된 SmallLecueNoteWrapper 밖으로 Modal을 분리시켜서 동일한 Level에 위치시켰어요. 이렇게 하면 두 컴포넌트 모두 부모-자식 포함관계가 아니므로 이벤트 버블링을 걱정하지 않아도 될 것이라고 생각했어요.&lt;/p&gt;
&lt;p&gt;실제로 위와 같이 구조를 수정하여 이벤트 버블링 문제를 성공적으로 해결했어요.&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk17 { color: #808080; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[JS의 가비지 컬렉터는 어떻게 동작할까?]]></title><description><![CDATA[Garbage Collector에서 Garbage는 더이상 사용되어지지 않는 메모리지만 release(방출)되지 않은 메모리를 의미해요. 이를 이해하기 위해서는 메모리의 LifeCycle을 이해할 필요가 있어요. 메모리는 다음과 같이 Allocate…]]></description><link>https://jungwoo3490.github.io/blog/js-gc/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/js-gc/</guid><pubDate>Fri, 04 Aug 2023 03:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Garbage Collector에서 Garbage는 더이상 사용되어지지 않는 메모리지만 release(방출)되지 않은 메모리를 의미해요.&lt;/p&gt;
&lt;p&gt;이를 이해하기 위해서는 메모리의 LifeCycle을 이해할 필요가 있어요.&lt;/p&gt;
&lt;p&gt;메모리는 다음과 같이 Allocate Memory - Use Memory - Release Memory라는 3단계의 LifeCycle을 가져요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/4385a84e-fcac-42d4-881c-5d0e521760f8/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;• Allocate memory - 생성한 Object에 메모리를 할당하는 것&lt;br/&gt;
• Use memory - 변수에서 메모리를 읽거나 쓰는 것&lt;br/&gt;
• Release memory - 할당한 메모리를 해제하는 것&lt;/p&gt;
&lt;p&gt;JavaScript는 C언어 같은 언어들과 다르게 memory를 release해주는 함수가 존재하지 않아요.&lt;br/&gt;
이 역할을 가비지 컬렉터가 대신 해주게 됩니다.&lt;/p&gt;
&lt;p&gt;즉, 가비지 컬렉션이란 더이상 필요하지 않은 메모리를 정리해주는 것을 의미해요. 이를 위해서는, 어떤 메모리가 더이상 필요하지 않은 메모리인지 판별할 수 있어야 하겠죠.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;판별 방법&lt;/h2&gt;
&lt;h3&gt;1. Memory Reference&lt;/h3&gt;
&lt;p&gt;어떤 메모리가 참조되어 있는지를 바탕으로 메모리가 Garbage인지 아닌지 판별하는 방법이다. 참조의 종류에는 2가지가 있어요.&lt;/p&gt;
&lt;h4&gt;• Implicit Reference&lt;br/&gt;&lt;/h4&gt;
&lt;p&gt;JavaScript Object는 prototype 같은 프로퍼티를 반드시 가지게 돼요. 이와 같이 암묵적으로 가지는 프로퍼티를 Implicit Reference라고 해요.&lt;/p&gt;
&lt;h4&gt;• Explicit Reference&lt;br/&gt;&lt;/h4&gt;
&lt;p&gt;우리가 명시적으로 선언한 프로퍼티를 Explicit Reference라고 해요.&lt;/p&gt;
&lt;p&gt;가비지 컬렉터는 더 이상 참조가 일어나지 않는 변수를 메모리에서 제거합니다.&lt;/p&gt;
&lt;h4&gt;※ 한계점&lt;/h4&gt;
&lt;p&gt;서로 다른 2개의 Object가 서로 참조하게 되어버리면(순환 참조) 절대 reference가 0이 될 수 없어요. 따라서 이 둘은 절대 release할 수 없게 된다는 문제가 있어요.&lt;/p&gt;
&lt;h3&gt;2. Mark and Sweep Algorithm&lt;/h3&gt;
&lt;p&gt;어떤 것이 garbage가 아닌지 마크하고(Mark), 마크되어있지 않은 가비지를 쓸어버리는(Sweep) 알고리즘이에요.&lt;/p&gt;
&lt;p&gt;알고리즘의 동작 순서는 다음과 같아요.&lt;/p&gt;
&lt;p&gt;1. 가비지 컬렉터가 roots 리스트를 만들어요. roots는 모든 global 변수예요.(ex) window Object)&lt;/p&gt;
&lt;p&gt;2. Mark and Sweep Algorithm은 모든 roots와 roots의 children들을 전부 다 검사하면서 reachable한지 아닌지 검사해요. reachable한 노드는 Mark해요. reachable하지 않은 노드는 garbage로 인식해요.&lt;/p&gt;
&lt;p&gt;3. Mark 되어있지 않은 노드를 Sweep해서 그 메모리들을 release해서 OS로 return해요.&lt;/p&gt;
&lt;h4&gt;※ 장점&lt;/h4&gt;
&lt;p&gt;root에서 reachable하지 않다면 순환 참조하는 경우도 garbage로 인식할 수 있어요.&lt;/p&gt;
&lt;h4&gt;※ 한계점&lt;/h4&gt;
&lt;p&gt;다음과 같은 시나리오를 생각해볼게요.&lt;/p&gt;
&lt;p&gt;1. 굉장히 많은 변수를 Allocation한다.&lt;br/&gt;
2. Allocate되는 대부분의 element는 unreachable하다.&lt;br/&gt;
3. 더 이상 어떤 Allocation도 수행되지 않는다.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;Mark and Sweep Algorithm에서 root 변수들은 메모리에 Allocation이 일어나야 생성돼요. 그 전까지 어떤 것이 garbage인지 판별할 수 없어 컬렉팅할 수 없어요.&lt;/p&gt;
&lt;p&gt;처음 일어났던 Allocate memory 중에서 garbage로 판단되는 메모리들이 있음에도 불구하고 컬렉팅하지 않아요. 새로운 Allocation이 일어나야 root를 만들텐데 Allocation이 안 일어나니까 먼저 루트를 만들 수 없고, 결국 어떤 메모리가 garbage인지 판별할 수가 없어요.&lt;/p&gt;
&lt;p&gt;이로 인해 memory leak(메모리 누수)이 발생하게 된다는 문제가 있어요.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Memory Leak Case&lt;/h2&gt;
&lt;h3&gt;1. Global Variables&lt;/h3&gt;
&lt;p&gt;선언 키워드 없이 변수를 선언하게 되면 그 변수는 window라는 global object의 프로퍼티로 할당되게 돼요. 그렇게 되면 그 변수를 모든 곳에 있는 코드가 reference할 수 있게 돼요.
함수 안에 지역변수를 선언한 경우 그 함수가 종료되면 메모리가 release되지만 window의 프로퍼티로 등록이 되어버리면 그 함수가 실행이 끝나더라도 그 변수는 메모리가 release되지 않아요. 결국 memory leak이 발생하게 됩니다. 따라서 메모리 누수를 방지하기 위해 선언 키워드를 사용하여 변수를 선언해야 해요.&lt;/p&gt;
&lt;p&gt;generator가 아닌 일반적인 함수 내에서 this는 global object window를 가리켜요. 이로 인해 this.변수에 값을 할당할 경우 위 문제와 동일한 문제가 발생하게 돼요.&lt;/p&gt;
&lt;h3&gt;2. Timers or Callbacks that are forgotten&lt;/h3&gt;
&lt;p&gt;다음 코드를 살펴봅시다.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;javascript&quot; data-index=&quot;0&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;serverData&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;loadData&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk11&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;renderer&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;renderer&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;innerHTML&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;serverData&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위 코드에서는 DOM에서 가져온 renderer 객체가 바뀌거나 제거될 수 있어요. 그렇게 되면 renderer에는 setInterval의 핸들러가 참조하고 있는 serverData가 더이상 참조될 일이 없어져요. 하지만 setInterval로 이 핸들러가 5초마다 실행되도록 했기 때문에 serverData에 대한 참조가 사라지지 않아요. 이 경우 clearInterval로 참조를 해제해주어야 해요. DOM에서 가져온 element인 renderer 또한 removeElement로 제거해주어야 해요.&lt;/p&gt;
&lt;h3&gt;3. Closures&lt;/h3&gt;
&lt;p&gt;클로저는 메모리 누수를 발생시킬 수 있어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;javascript&quot; data-index=&quot;1&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;theThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;replaceThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;originalThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;theThing&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;unused&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;originalThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;hi&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;theThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;longStr:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1000000&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;*&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;),&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;someMethod&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;      &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;message&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    },&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk11&quot;&gt;setInterval&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;replaceThing&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위 코드에서 2개의 클로저가 동일한 로컬 스코프를 공유하고 있어요. replaceThing의 호출이 종료되면 로컬 스코프가 제거되어야 하는데 제거되지 않아요. 그 이유는 theThing에 할당되어 있는 someMethod의 function을 통해서 이 로컬 스코프가 계속 reference되기 때문이에요. 이 로컬 스코프 안에 있는 originalThing을 참조하고 있는 unused function도 마찬가지로 로컬 스코프가 사라지지 않기 때문에 계속 남아있게 돼요. 이 함수는 이제 사용되어지지 않는데 release가 되지 않아요. 즉 garbage인데 컬렉팅이 되지 않게 돼요.&lt;/p&gt;
&lt;h3&gt;4. DOM에서 벗어난 요소 참조&lt;/h3&gt;
&lt;p&gt;DOM 노드를 데이터 구조 속에 저장하는 경우가 있어요. 그렇게 되면 동일한 DOM 요소에 대해 하나는 DOM 트리에, 하나는 데이터 구조에, 총 2개의 참조가 존재하는 셈이죠. 그 element를 제거하고자 한다면 이 2개의 참조 모두가 닿을 수 없도록 해주어야 해요.&lt;/p&gt;
&lt;p&gt;특히 테이블 내의 셀 태그를 참조하다가 테이블을 DOM에서 제거한 상태에서 셀에 대한 참조를 갖고 있다면 엄청난 메모리 누수가 발생가헤 돼요. 테이블 셀에 대한 참조 하나만으로도 전체 테이블이 메모리에 남아있게 되기 때문이에요.&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk7 { color: #B5CEA8; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[TypeScript 컴파일러 옵션 설정하기 (tsconfig.json)]]></title><description><![CDATA[TypeScript는 다른 언어에 비해 컴파일 옵션을 간단하게 설정할 수 있어요. 컴파일러 옵션 초기화 먼저 컴파일러 옵션 파일을 생성해볼게요.
터미널에 다음과 같이 입력하면 돼요. 이렇게 입력해주면 현재 경로에 tsconfig.json…]]></description><link>https://jungwoo3490.github.io/blog/ts-compiler/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/ts-compiler/</guid><pubDate>Wed, 12 Jul 2023 03:00:00 GMT</pubDate><content:encoded>&lt;p&gt;TypeScript는 다른 언어에 비해 컴파일 옵션을 간단하게 설정할 수 있어요.&lt;/p&gt;
&lt;h2&gt;컴파일러 옵션 초기화&lt;/h2&gt;
&lt;p&gt;먼저 컴파일러 옵션 파일을 생성해볼게요.
터미널에 다음과 같이 입력하면 돼요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;0&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;$ tsc --init&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 입력해주면 현재 경로에 tsconfig.json이라는 파일이 생성돼요.
파일을 열어보면 다음과 같이 기본값으로 설정값들이 초기화되어있는 것을 확인할 수 있어요.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/18c2dcbe-a216-4286-852e-88aff75f21f8/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;사진과 같이 대부분이 주석처리되어있는 것을 확인할 수 있어요.
초기 설정을 위해 기본 설정값들을 다 지워볼게요.&lt;/p&gt;
&lt;h2&gt;1. &quot;include&quot;:&lt;/h2&gt;
&lt;p&gt;기본적으로 tsc를 사용하여 컴파일을 하려면 한 번에 하나의 파일만 컴파일이 가능해요.
하지만 파일이 수백개라면 어떨까요...? 일일이 하나하나 수정하고 컴파일하기 굉장히 번거로울 거예요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;1&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;include&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: [&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;src&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 작성해주면 tsc만 터미널에 작성해주어도 src 디렉터리 아래에 있는 모든 ts 파일들이 컴파일돼요.&lt;/p&gt;
&lt;h2&gt;2. &quot;compilerOptions&quot;:&lt;/h2&gt;
&lt;p&gt;컴파일러의 세부적인 옵션을 설정하는 여러 옵션들이 포함되는 부분이에요.&lt;br/&gt;
주로 컴파일 후 생성되는 JS 파일을 설정하는 옵션들이 compilerOptions 안에 포함되게 돼요.&lt;/p&gt;
&lt;h2&gt;3. &quot;target&quot;:&lt;/h2&gt;
&lt;p&gt;컴파일 결과 생성되는 자바스크립트 버전을 설정하는 옵션이에요.&lt;br/&gt;
target 옵션은 compilerOptions 내부에 작성해주어야 해요.&lt;br/&gt;
(참고로 ESNext는 자바스크립트 최신 버전을 의미해요.)&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;2&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;target&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;ESNext&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;4. &quot;module&quot;:&lt;/h2&gt;
&lt;p&gt;컴파일 결과 변환된 자바스크립트 코드의 모듈 시스템을 설정하는 옵션이에요.&lt;br/&gt;
module 옵션은 compilerOptions 내부에 작성해주어야 해요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;3&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;module&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;ESNext&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;실제로 module을 ES5로 지정하고 ts 파일에 화살표 함수를 작성한 뒤 컴파일하면 컴파일 결과 생성되는 JS 파일에 있는 함수가 함수 표현식으로 변환돼요. 화살표 함수는 ES5 문법에서 지원하지 않기 때문이에요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;4&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// tsconfig.json&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;module&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;ES5&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위와 같이 설정 파일을 작성하고&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;typescript&quot; data-index=&quot;5&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// index.ts&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = () &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;위와 같이 화살표 함수를 작성한 후 컴파일하면&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;javascript&quot; data-index=&quot;6&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// index.js&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; () {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk15&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;다음과 같이 함수 표현식으로 변환되는 것을 확인할 수 있어요.&lt;/p&gt;
&lt;h2&gt;5. &quot;outDir&quot;:&lt;/h2&gt;
&lt;p&gt;TS 파일을 컴파일하게 되면 TS 파일과 동일한 경로에 컴파일 결과 JS 파일이 생성돼요.&lt;/br&gt;
하지만 TS 파일이 매우 많다면 어떨까요? 컴파일 후 해당 경로에 위치한 파일이 매우 많고 복잡해지겠죠.&lt;/br&gt;&lt;/p&gt;
&lt;p&gt;outDir은 컴파일 결과 생성되는 자바스크립트 파일의 생성 위치를 지정하는 옵션이에요.&lt;br/&gt;
outDir 옵션은 compilerOptions 내부에 작성해주어야 해요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;7&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;outDir&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;dist&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;다음과 같이 작성하게 되면 컴파일 시 dist라는 폴더에 컴파일 결과 JS 파일들이 위치하게 돼요.&lt;br/&gt;
만약 지정해준 이름의 폴더가 존재하지 않을 시 해당 이름의 폴더를 자동 생성한 후 컴파일 결과 파일을 위치시키게 돼요.&lt;/p&gt;
&lt;h2&gt;6. &quot;strict&quot;:&lt;/h2&gt;
&lt;p&gt;TypeScript 컴파일러가 타입을 얼마나 엄격하게 검사할지 설정하는 옵션이에요.&lt;/br&gt;&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;typescript&quot; data-index=&quot;8&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;hello&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk10&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; + &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이 코드는 눈으로 봐서는 전혀 문제가 없어보이죠. 실제로 에디터에서도 오류로 감지하는 부분이 전혀 없어요.&lt;/br&gt;
tsconfig,json에 다음과 같이 옵션을 설정해볼게요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;9&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;strict&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;그러면 신기하게도 hello 함수에 오류가 발생하게 돼요. 오류가 발생하는 부분은 매개변수로 받은 message 부분이에요.&lt;br/&gt;
TypeScript에서는 매개변수의 타입을 사람이 직접 지정하도록 권장해요. 매개변수의 타입은 컴파일러가 추론할 수 없기 때문이에요.&lt;br/&gt;
위와 같이 추론이 되지 않는 변수의 타입을 명시하지 않으면 strict 옵션을 true로 설정했을 때 오류가 발생하게 돼요.&lt;br/&gt;
반대로 strict 옵션을 false로 설정하면 엄격한 검사를 하지 않으므로 오류가 발생하지 않게 돼요.&lt;/p&gt;
&lt;p&gt;strict 옵션은 compilerOptions 내부에 작성해주어야 해요.&lt;/p&gt;
&lt;h2&gt;7. &quot;moduleDetection&quot;:&lt;/h2&gt;
&lt;p&gt;두 개의 TypeScript 파일에 동일한 이름의 변수를 각각 선언하면 오류가 발생하게 돼요.&lt;br/&gt;
JavaScript에서는 분명 파일별로 동일한 이름의 변수를 각각 작성해도 아무런 문제가 발생하지 않았죠.&lt;br/&gt;
왜 이런 오류가 발생하는 것일까요?&lt;/p&gt;
&lt;p&gt;JavaScript는 모든 파일을 개별 모듈로 취급하기 때문에 각 파일마다 동일한 이름의 변수를 선언해도 문제가 되지 않아요.&lt;br/&gt;
이에 반해, TypeScript는 기본적으로 모든 TypeScript 파일을 전역 모듈로 취급해요. 그래서 각기 다른 파일에 선언한 변수도 동일한 스코프 내에 있다고 판단하여 오류가 발생한 것이에요.&lt;/p&gt;
&lt;p&gt;이를 해결할 수 있는 방법이 있는데, 바로 import, export 같은 모듈 시스템 키워드를 이용하는 것이에요.&lt;br/&gt;
모듈 시스템을 이용하는 키워드를 파일 내에 1번 이상 작성하면 그 파일은 독립된 모듈로 취급돼요.&lt;br/&gt;
따라서, 모든 파일마다 모듈 시스템 키워드를 억지로 끼워넣으면 모든 파일이 개별 모듈로 취급되게 됩니다.&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;하지만, 모든 파일마다 일일히 모듈 시스템 키워드를 추가해주는 것은 상당히 번거로운 일이겠죠.&lt;br/&gt;
이럴 때 쉽게 해결할 수 있는 방법은 moduleDetection 옵션을 이용하는 것이에요.&lt;br/&gt;
moduleDetection 옵션은 TypeScript가 각각의 파일을 어떤 모듈로 감지할 것인지를 결정하는 옵션이에요.&lt;br/&gt;
tsconfig.json에 다음과 같이 작성해볼게요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;10&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;compilerOptions&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;moduleDetection&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;force&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 설정하면 신기하게도 중복 선언 오류가 사라지게 돼요.&lt;br/&gt;
왜 오류가 사라졌는지는 TS 파일을 컴파일해보면 알 수 있어요. 컴파일 결과 JS 파일을 열어보면 다음과 같은 모듈 시스템 키워드가 원본 코드에 자동으로 추가되어 있는 것을 볼 수 있어요.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;javascript&quot; data-index=&quot;11&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk15&quot;&gt;export&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;moduleDetection 옵션을 force로 설정하게 되면, 컴파일 시 타입스크립트 컴파일러가 모듈 시스템을 사용하는 키워드를 자동으로 추가해줘요.&lt;br/&gt;
이렇게 하면 모든 TypeScript 파일이 개별 모듈로 취급받게 됩니다.&lt;/p&gt;
&lt;h2&gt;8. &quot;ts-node&quot;:&lt;/h2&gt;
&lt;p&gt;일반적인 TypeScript 컴파일 과정을 살펴보면, TypeScript 컴파일러가 TS 파일을 AST(추상 문법 트리)로 변환한 뒤, AST에 대해 타입 검사를 실시하여 오류가 없다면 JS 파일로 변환시켜요. 그 뒤 JS 컴파일러가 JS 파일을 AST(추상 문법 트리)로 변환한 뒤, AST를 바이트 코드로 변환하여 실행하는 방식이에요. 즉, TS 파일을 실행까지 시키기 위해서는 TS 파일을 컴파일 하여 JS 파일로 변환하고, 변환된 JS 파일을 다시 컴파일해야 해요.&lt;br/&gt;
하지만 2번 컴파일해야 한다는 점이 번거로울 수 있어요. 이를 위해 ts-node라는 편리한 모듈이 존재해요. ts-node를 사용해 TS 파일을 컴파일하면 바로 실행까지 시켜줍니다.&lt;/p&gt;
&lt;p&gt;앞선 옵션에서 module 옵션을 ESNext로 설정하고 ts-node를 사용하여 컴파일하면 오류가 발생하게 돼요. 오류가 발생하는 이유는 ts-node는 기본적으로 CommonJS를 사용하기 때문에 ES 모듈 시스템을 이해하지 못하기 떄문이에요.&lt;/p&gt;
&lt;p&gt;이를 해결하기 위해서는 tsconfig.json에서 ts-node를 위한 옵션을 추가해주면 돼요.&lt;br/&gt;
tsconfig.json에 다음과 같이 작성해보자.&lt;/p&gt;
&lt;pre class=&quot;grvsc-container default-dark&quot; data-language=&quot;json&quot; data-index=&quot;12&quot;&gt;&lt;code class=&quot;grvsc-code&quot;&gt;&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;ts-node&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk12&quot;&gt;&amp;quot;esm&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;true&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;  }&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;grvsc-line&quot;&gt;&lt;span class=&quot;grvsc-source&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;이렇게 설정해주면 ts-node가 ES 모듈 시스템으로 동작하게 돼요.&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .default-dark {
    background-color: #1E1E1E;
    color: #D4D4D4;
  }
  .default-dark .mtk1 { color: #D4D4D4; }
  .default-dark .mtk12 { color: #9CDCFE; }
  .default-dark .mtk8 { color: #CE9178; }
  .default-dark .mtk3 { color: #6A9955; }
  .default-dark .mtk4 { color: #569CD6; }
  .default-dark .mtk11 { color: #DCDCAA; }
  .default-dark .mtk10 { color: #4EC9B0; }
  .default-dark .mtk15 { color: #C586C0; }
  .default-dark .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[육군 정보보호병 면접 합격 후기]]></title><description><![CDATA[서류 합격 후기는 여기를 참조하시기 바랍니다.
필자는 21년…]]></description><link>https://jungwoo3490.github.io/blog/cert-interview-/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/cert-interview-/</guid><pubDate>Mon, 20 Mar 2023 03:00:00 GMT</pubDate><content:encoded>&lt;p&gt;서류 합격 후기는 &lt;a href=&quot;https://velog.io/@jungwoo3490/%ED%9B%84%EA%B8%B0-%EC%9C%A1%EA%B5%B0-%EC%A0%95%EB%B3%B4%EB%B3%B4%ED%98%B8%EB%B3%91-%EC%84%9C%EB%A5%98-%ED%95%A9%EA%B2%A9-%ED%9B%84%EA%B8%B0&quot;&gt;여기&lt;/a&gt;를 참조하시기 바랍니다.&lt;br/&gt;
필자는 21년 5월에 육군 정보보호병으로 입대하여 육군본부에서 관제 업무를 수행하였습니다.&lt;/p&gt;
&lt;h3&gt;• 면접 일자 &amp;#x26; 장소&lt;/h3&gt;
&lt;p&gt;서류 합격을 하게 되면 면접 일자와 면접 장소가 나오게 됩니다.&lt;br/&gt;
면접 장소는 대전•충남지방병무청입니다. 제가 면접을 볼 때는 면접 시간이 오후 1시였기에 멀리 사시는 분들도 여유롭게 올 수 있는 시간이었는데 거리가 부담이신 분들은 전날 근처에서 자고 오시는 분들도 계셨습니다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/75d0c5c0-498a-4fef-8842-53d1dafcc514/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3&gt;• 면접 순서&lt;/h3&gt;
&lt;p&gt;면접 순서는 번호표로 결정됩니다. 즉, 먼저 와서 번호표를 먼저 뽑으면 먼저 면접을 볼 수 있습니다. 빨리 면접을 보고 싶으신 분들은 일찍 와서 번호표를 뽑으시면 됩니다.&lt;br/&gt;
저도 면접을 빨리 보고 싶어서 일찍 갔었는데 생각보다 빨리 오신 분들이 많았습니다. 11시에 도착했었는데 10 초반대 번호였던 것으로 기억합니다.&lt;br/&gt;
빨리 면접을 보고 싶으시다면 생각하시는 것보다 빨리 오시는 편이 좋습니다.&lt;br/&gt;
(일찍 오실 때 공부할 거 챙겨오시면 좋습니다. 저는 아무것도 안 챙겨갔는데 일찍 오신 분들 다 책 펴고 공부하고 계셔서 혼자만 멀뚱멀뚱 앉아있었던,,,,,)&lt;/p&gt;
&lt;h3&gt;• 필기 시험&lt;/h3&gt;
&lt;p&gt;면접 전에 1시간 정도 필기시험을 먼저 치르게 됩니다.&lt;br/&gt;
필기시험은 객관식 10문제이며, 정보보안 이론, 공격 기법, Linux 문제가 나옵니다.&lt;br/&gt;
정보보안 이론 부분은 정보보안기사 내용에서 출제된다고 합니다. 저는 당시 이론적인 부분은 전혀 몰랐기 때문에 정보보안 이론 문제는 거의 감으로 풀었던 것 같습니다. 가장 기억나는 문제는 생체인증 특징이 아닌 것은...? &lt;del&gt;이걸 정보보호병이 왜 알아야 해&lt;/del&gt;&lt;br/&gt;
공격 기법 문제와 Linux 문제는 그래도 읽고 풀었던 것 같습니다. 공격기법 문제는 XSS가 나왔고, Linux 문제로는 netstat 관련 문제가 나왔습니다.&lt;br/&gt;
특히 Linux 문제는 다음 기수들 이야기를 들어봐도 항상 출제되었던 것 같습니다. &lt;strong&gt;Linux 명령어들은 확실하게 숙지하고 가시기 바랍니다.&lt;/strong&gt;&lt;br/&gt;
저는 확실하게 푼 문제가 절반 이하였습니다. 그렇다고 필기 시험이 중요하지 않다고 생각하시지 마시고 잘 볼 수록 좋으니 시간 여유가 있으시다면 위에 서술한 내용들도 준비하시는 것을 추천드립니다.&lt;/p&gt;
&lt;h3&gt;• 면접 방식&lt;/h3&gt;
&lt;p&gt;면접은 크게 인성 면접과 기술 면접으로 나뉘게 됩니다. 면접은 처음에도 서술했듯이 번호표 순서로 진행되며, 1대 1 면접으로 진행됩니다.&lt;br/&gt;
인성 면접을 먼저 볼지 기술 면접을 먼저 볼지는 순서에 따라 달라집니다. 예를 들어 1번이 인성 면접을 먼저 보게 되었으면 2번은 기술 면접을 먼저 보고, 3번은 인성 면접 대기 줄에서 대기하고 4번은 기술 면접 줄에서 대기하고... 이런 식입니다. 인성 면접이 끝난 사람은 기술 면접 줄에서 다시 대기하고, 기술 면접이 끝난 사람은 인성 면접 줄에서 대기합니다. 두 면접이 모두 끝난 사람은 바로 집에 가면 됩니다. 즉, 번호표를 먼저 뽑은 사람이 집에 빨리 가게 됩니다.&lt;br/&gt;
저는 인성 면접을 먼저 보게 되었습니다. 기술 면접이 더 걱정되었기에 기술 면접 먼저 끝내버리고 싶었지만 아쉬웠습니다. 그때도 느꼈지만 면접 과정이 뭔가 병원 진료하는 것 같았습니다. 번호표 뽑고 기다리다가 순서가 되면 진찰실 크기의 방에 들어가서 면접 보고 나오는 방식이었습니다. 기술 면접방에서 나오는 분들 표정에 집중했는데 나오는 분들 표정이 다들 좋지 못한 것 같아서 기술 면접 어려운가 보다... 하고 걱정부터 들었습니다.&lt;/p&gt;
&lt;h3&gt;• 인성 면접&lt;/h3&gt;
&lt;p&gt;인성 면접은 10분 정도 진행됩니다. 먼저 관제 업무를 잘 수행할 수 있는지를 보기 위해 관제 업무 특성과 관련된 질문을 합니다. 또 아무래도 공동체 생활을 해야 하기에 갈등 해결 관련 질문도 합니다. 그리고 북한과 관련된 질문도 하는데 사상을 파악하기 위해서 그런 것 같습니다.&lt;br/&gt;
인성면접에서 제가 받은 질문은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;• 상급자가 본인에게 부당한 지시를 내린다면 어떻게 대응할 것인지?&lt;br/&gt;
• 군생활에 적응하지 못하는 인원이 있다면 어떻게 행동할 것인지?&lt;br/&gt;
• 북한에 대해서 어떻게 생각하는지?&lt;br/&gt;
• 군사기밀을 다루게 될 텐데 이를 유출할 것인지?&lt;br/&gt;
• 낮밤 패턴이 자주 바뀔 수도 있는데 괜찮은지?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;간단한 질문들이니 크게 걱정 안 하셔도 됩니다. 자신이 뚜렷한 국가관을 가지고 있고, 공동체 생활을 잘 해낼 수 있고, 관제 업무에 적합한 사람이라는 것을 최대한 어필하면 됩니다.&lt;/p&gt;
&lt;h3&gt;• 기술 면접&lt;/h3&gt;
&lt;p&gt;기술 면접도 10분 정도 진행됩니다. 기술 면접에서는 지원 동기, 동아리 활동 경험이 있다면 본인이 동아리에서 한 활동에 대한 질문, 보안 지식 및 보안 장비 관련 질문을 받게 됩니다.&lt;br/&gt;
기술면접에서 제가 받은 질문은 다음과 같습니다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;• 자신 있는 해킹 분야가 무엇인지?&lt;br/&gt;
• (웹 해킹이라고 답한 결과) 웹 해킹 기술 중 하나를 자세히 설명해주세요.&lt;br/&gt;
• (SQL injection에 대해 설명한 결과) Blind SQL Injection이 무엇인지 아는가?&lt;br/&gt;
• 동아리에서 어떤 활동을 하였는지?&lt;br/&gt;
• WireShark를 다뤄본 적이 있는지?&lt;br/&gt;
• 알고 있는 보안 장비 중 하나에 대해 자세히 설명해주세요.&lt;br/&gt;
• (IDS에 대해 설명한 결과) IDS의 탐지기법에는 어떤 것이 있는지 아는가?&lt;br/&gt;
• (이상탐지, 오용탐지라고 답한 결과) 각 탐지기법의 장단점을 하나씩만 설명해주세요.&lt;br/&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;다행히 모두 아는 내용이었어서 모든 질문에 답변을 할 수 있었습니다.&lt;br/&gt;
팁을 하나 드리자면 저는 가산점에 반영은 안 되지만 여러 보안 관련 수료증들을 챙겨가서 면접관님께 보여드렸습니다. 내가 이렇게 보안 분야에 열정적이다라는 것을 어필하기 위해서였습니다. 실제 면접 결과에 영향을 미쳤는지는 모르겠지만 당시 면접관님께서 &quot;이것저것 많이 하셨네요&quot;라고 긍정적인 멘트를 하셨습니다. 내가 뭔가 이것저것 한 게 많다 하시면 관련 서류들을 들고 가서 면접관님께 어필 용도로 사용해보는 것도 좋은 방법이라고 생각합니다.&lt;br/&gt;
제가 받았던 질문과 같이 자신 있는 해킹 분야와 같은 질문이 들어올 수도 있으니 관심 분야 하나 정도는 정해서 해당 분야의 공격 기법에는 무엇이 있는지는 알고 가시는 것을 추천드립니다. &lt;strong&gt;그리고 보안장비에 대한 질문은 거의 무조건 나온다고 생각하시면 됩니다.&lt;/strong&gt; 적어도 대표적인 보안 장비인 UTM, IDS, IPS의 개념, 특징, 동작 방식, 각각의 차이점 정도는 꼭 숙지하고 갑시다!!&lt;/p&gt;
&lt;h3&gt;• 깨알 성심당 (TMI...)&lt;/h3&gt;
&lt;p&gt;병무청에서 버스나 지하철을 타고 조금만 가면 은행동 시내에 갈 수 있습니다. 대전역과도 가깝기 때문에 시간이 남는다면 대전 온 김에 시내 구경도 할 겸 성심당에서 빵을 사가는 것도 좋은 선택입니다. 평일 낮이라 사람도 많이 없어서 저도 성심당에 들러서 빵을 사 갔습니다. 이때가 아니면 대전 올 일 없을 거라 생각해서 빵을 2만원어치 잔뜩 담아서 갔습니다. (이때만 해도 자대가 대전 바로 옆 계룡일줄은 상상도 못했,,, )&lt;br/&gt;
고구마를 좋아하신다면 고구마튀소를 추천드립니다. 고구마튀소를 가장 맛있게 먹었던 것 같습니다. 개인적으로 소금빵도 맛있게 먹었습니다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/ef0fb154-8f22-4ecb-bc44-4ec389698590/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3&gt;• 면접 결과&lt;/h3&gt;
&lt;p&gt;면접을 잘 봤음에도 좋지 못한 서류 등수 때문에 조금 걱정은 되었습니다. 발표 전날은 심장이 얼마나 뛰었는지 모릅니다...&lt;br/&gt;
10시 발표 예정이라 이른 시간에 기상해서 결과 발표를 기다리고 있었는데 10시가 되어서도 아무 문자도 안 오길래 떨어졌구나 생각하고 있었습니다. 그런데 10분 뒤 합격 문자가!!!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/5e4c7efb-f685-4362-a4ce-46b4b7d3483b/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/87173ec3-96ad-4448-8402-0f6a8f352065/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;제 최종 점수와 선발 등수입니다. 서류 전형에서 32등으로 합격했었는데 최종은 13등으로 합격했습니다. 면접으로만 20명을 제친 셈이나 마찬가지입니다. 면접 • 실기 만점이 40점이었는데 34점을 받은 것으로 보아 필기시험은 망쳤어도 면접에서 좋은 결과를 얻었다고 유추해볼 수 있습니다. 여러분도 혹여나 서류 합격 등수가 낮더라도 포기하지 마시고 면접만 잘 준비하신다면 충분히 합격하실 수 있습니다. 정보보호병 지원자 분들의 건승을 기원합니다!! 🔥&lt;/p&gt;
&lt;p&gt;다음 포스트에는 정보보호병 장단점, 자대배치 및 생활에 대해 간략하게 설명드리려고 합니다.&lt;br/&gt;
궁금하신 점은 댓글 또는 &lt;a href=&quot;mailto:jungwoo3490@naver.com&quot;&gt;jungwoo3490@naver.com&lt;/a&gt;으로 문의해주시면 보안에 문제되지 않는 한 성심성의껏 답변해드리겠습니다!!!&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
&lt;/style&gt;</content:encoded></item><item><title><![CDATA[육군 정보보호병 서류 합격 후기]]></title><description><![CDATA[올해를 마지막으로 정보보호병이 사라진다고 하여 올해 지원하는 미래 정보보호병 여러분들께 조금이나마 도움이 되고자 글을 작성하게 되었습니다.
필자는 21년…]]></description><link>https://jungwoo3490.github.io/blog/cert-paper/</link><guid isPermaLink="false">https://jungwoo3490.github.io/blog/cert-paper/</guid><pubDate>Sun, 19 Mar 2023 03:00:00 GMT</pubDate><content:encoded>&lt;p&gt;올해를 마지막으로 정보보호병이 사라진다고 하여 올해 지원하는 미래 정보보호병 여러분들께 조금이나마 도움이 되고자 글을 작성하게 되었습니다.&lt;br/&gt;
필자는 21년 5월에 육군 정보보호병으로 입대하여 육군본부에서 관제 업무를 수행하였습니다.&lt;/p&gt;
&lt;h3&gt;• 정보보호병이란?&lt;/h3&gt;
&lt;p&gt;병무청 홈페이지에 보면 정보보호병은 육군본부, 군단급, 전방의 일부사단에서 컴퓨터 정보보호관련 임무를 수행한다고 되어있습니다.&lt;br/&gt;
더 자세히 말하면 정보보호병은 기본적으로 사이버방호실에서 관제 업무를 수행하게 됩니다.&lt;br/&gt;
육군본부, 사령부, 군단급은 사이버방호실이 체계적으로 구축되어 있습니다. 따라서 이런 상급부대에 배치되게 되면 기본적으로 사이버방호실에서 관제업무를 수행하게 됩니다. ( 물론 예외도 있습니다. )&lt;br/&gt;
뿐만 아니라 전방 사단에도 사이버방호실이 있는 부대가 있는데, 이런 부대에 가면 정보보호 관련 업무를 수행할 수 있습니다.&lt;br/&gt;
간혹 방호실이 체계적으로 구축되지 못한 사단에 배치되는 경우도 있는데, 이 경우는 정보보호 관련 업무를 수행하지 못할 확률이 높습니다.&lt;br/&gt;
관제 업무를 수행하게 된다면, 많은 보안 장비를 다루어볼 수 있습니다. 일반적으로 상급부대로 갈수록 운영하는 보안 장비가 많기 때문에, 더 많은 보안 장비를 다루어 볼 수 있습니다.&lt;br/&gt;
또 업무 중 개발을 하는 경우도 생기기 때문에 저와 같은 개발 분야의 사람들에게도 좋은 경험이 될 수 있습니다.&lt;/p&gt;
&lt;h3&gt;• 정보보호병에 지원하게 된 이유&lt;/h3&gt;
&lt;p&gt;당시 저는 모든 것이 랜덤인 징집병보다는, 제 전공을 살려서 갈 수 있는 모집병에 대해 찾아보고 있었습니다. 그러다 IT 관련 전문특기병인 SW개발병과 정보보호병에 대해 알게 되었습니다.&lt;/p&gt;
&lt;p&gt;저는 아무래도 개발분야이다 보니 SW개발병을 가고 싶었지만, 현실적으로 불가능에 가까웠습니다. 1년에 8명정도밖에 선발하지 않았기에 경쟁률이 매우 높았고, 그만큼 선발자 평균 스펙도 굉장히 높았습니다. (SW개발병도 육군본부에서 근무하기 때문에 실제로 대화도 많이 했었는데 대부분 고학년 및 개발 관련 고스펙자, 실제로 현업을 하다 오신 분, 백준 루비 등등... )&lt;/p&gt;
&lt;p&gt;그래서 저는 SW개발병은 과감히 포기하고 개발병보다는 경쟁률이 낮은 정보보호병을 준비하기로 결심했습니다. 제가 지원할 당시 20명을 선발했는데 최종적으로 100명 정도의 인원이 지원했던 것으로 기억합니다.&lt;/p&gt;
&lt;h3&gt;• 선발 절차&lt;/h3&gt;
&lt;p&gt;정보보호병은 전문특기병이기 때문에 기술행정병에 비해 선발 조건이 까다로운 편입니다. 전문특기병은 전문 지식을 필요로 하는 특수 병과이며, 기술행정병에 비해 더욱 전문적인 조건을 필요로 합니다.&lt;br/&gt;
선발 과정은 크게 &lt;strong&gt;서류 ➡️ 필기 &amp;#x26; 면접&lt;/strong&gt;으로 이루어집니다.&lt;br/&gt;
서류단계 커트라인은 선발 인원의 2배수입니다. 서류 합격을 하게 되면 자신이 몇 등으로 합격되었는지까지 알려주기 때문에 합격자들 중 자신이 어느 정도 위치인지 확인해볼 수 있습니다.&lt;br/&gt;
필기시험은 면접 전에 1시간 가량 응시하며, 정보보안 관련 10문제를 응시하게 됩니다. 면접은 인성면접과 기술면접으로 나뉘며, 각각 평균적으로 10분 정도 소요됩니다.&lt;/p&gt;
&lt;h3&gt;• 서류 지원&lt;/h3&gt;
&lt;p&gt;개발분야에 비해 보안분야 지식은 턱없이 부족한 편이었지만, 서류 점수에서 충분히 포인트를 얻을 만한 부분이 있다고 생각했습니다. 제가 가산점을 받을 수 있다고 생각했던 포인트는 다음과 같습니다.&lt;/p&gt;
&lt;p&gt;(❗️❗️❗️ 해당 가산점은 제가 군 지원 당시 배점 기준을 따르므로 현재 기준은 &lt;a href=&quot;https://www.mma.go.kr/contents.do?mc=mma0000516&quot;&gt;여기&lt;/a&gt;를 참조하시기 바랍니다. )&lt;/p&gt;
&lt;p&gt;1. 정보처리기능사 자격증&lt;br/&gt;
그 당시 기준표에 따르면 정보처리기능사 자격증은 자격증 가산점 중 가장 낮은 가산점을 받을 수 있는 자격증이었습니다. 가장 낮은 가산점을 받더라도 미보유자와 6점 차이나 났기 때문에 꽤 큰 점수였다고 생각합니다.&lt;br/&gt;
특별한 경력이 없는데 정보보호병에 지원하고 싶다면 &lt;strong&gt;가장 낮은 가산점을 받는 자격증이라도 시간을 투자하여 반드시 취득하는 것을 추천드립니다.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;2. 교내 보안 동아리&lt;br/&gt;
지금은 사라졌지만, 제가 지원할 당시 교내 보안 동아리에 소속되어 있으면 가산점을 받을 수 있었습니다. 그 당시 저는 교내 보안 동아리에 소속되어 있었기에 작은 가산점을 얻을 수 있었습니다.&lt;br/&gt;
&lt;strong&gt;현재 기준에 따르면, BoB를 제외한 모든 동아리는 가산점을 부여하지 않습니다.&lt;/strong&gt; 지원시 참고 바랍니다.&lt;/p&gt;
&lt;p&gt;3. 4년제 컴퓨터공학 / 2학년 수료&lt;br/&gt;
대부분 1순위, 2순위 전공관련자들이 지원을 할 것이기 때문에 남들과 큰 차이가 있을 거라고 생각하진 않았던 부분이지만, 2학년까지 수료했기에 나쁘지 않은 점수를 받을 수 있을 것이라고 생각했습니다. 지금은 제가 지원할 당시보다 1순위 전공과 2순위 전공의 가산점의 격차가 더 커졌습니다 ☹️&lt;br/&gt;
자신의 전공이 몇 순위인지 확인하려면 위 배점 기준 링크를 참조하시기 바랍니다. 보통 정보보안 관련 학과가 1순위, 컴퓨터/전산 관련 학과가 2순위입니다. 나머지는 비전공으로 분류됩니다.&lt;/p&gt;
&lt;p&gt;지원자 중 BoB 수료생 및 실무 경험자가 많을 거라고 생각하지 않았고, 저도 충분히 포인트를 얻을 수 있는 부분이 있었기에, 정보보호병에 지원하게 되었습니다.&lt;/p&gt;
&lt;h3&gt;• 서류 결과&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://velog.velcdn.com/images/jungwoo3490/post/f5e16fa1-68ec-4138-9c4d-d20794ffb7dd/image.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;서류 결과가 나왔고, 저는 40명 중 32등으로 합격하게 되었습니다. 당시 배점 결과를 따로 저장해두지 않아서 몇 점으로 서류합격을 했는지는 기억이 나지 않습니다. 서류에 합격해서 기뻤던 마음보다는, 턱걸이로 합격했기에 면접에서 최소 제 앞에 있는 12명을 제쳐야 한다는 생각에 걱정이 앞섰습니다. 걱정도 잠시, 서류 합격한 김에 면접까지 최선을 다해서 준비해보자고 굳게 다짐했습니다.&lt;/p&gt;
&lt;p&gt;필기시험과 면접 합격 후기는 다음 포스트에 작성하도록 하겠습니다.
궁금하신 점은 댓글 또는 &lt;a href=&quot;mailto:jungwoo3490@naver.com&quot;&gt;jungwoo3490@naver.com&lt;/a&gt;으로 문의해주시면 보안에 문제되지 않는 한 성심성의껏 답변해드리겠습니다!!!&lt;/p&gt;
&lt;style class=&quot;grvsc-styles&quot;&gt;
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line &gt; * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: &apos; &apos;;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting &gt; .grvsc-code &gt; .grvsc-line::before {
    content: &apos; &apos;;
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
&lt;/style&gt;</content:encoded></item></channel></rss>